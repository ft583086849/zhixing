# ğŸ”§ æ•°æ®å­—æ®µä¿®å¤æŠ¥å‘Š

## ğŸ“‹ **ç”¨æˆ·åé¦ˆçš„é—®é¢˜**

æ ¹æ®æ‚¨çš„æˆªå›¾åé¦ˆï¼š

1. âŒ **ä½£é‡‘æ¯”ç‡è®¾ç½®æ—¶æé†’å¤±è´¥**
2. âŒ **äºŒçº§é”€å”®ç®¡ç†è¡¨æ ¼ä¸­æ˜¾ç¤ºä¸ºç©ºï¼š**
   - æ”¶æ¬¾æ–¹å¼ï¼šæ˜¾ç¤º"-"
   - è®¢å•æ•°é‡ï¼šæ˜¾ç¤º"-"  
   - æ³¨å†Œæ—¶é—´ï¼šæ˜¾ç¤º"-"
3. âŒ **è®¢å•åˆ—è¡¨ä¸­æ˜¾ç¤ºé—®é¢˜ï¼š**
   - è®¢å•çŠ¶æ€ï¼šæ˜¾ç¤ºè‹±æ–‡ "confirmed_configuration"
   - åˆ›å»ºæ—¶é—´ï¼šæ˜¾ç¤º"-"

## ğŸ” **é—®é¢˜æ ¹å› åˆ†æ**

### **æ•°æ®å­—æ®µä¸åŒ¹é…é—®é¢˜**

#### **äºŒçº§é”€å”®æ•°æ®ç¼ºå¤±å­—æ®µï¼š**
```javascript
// åŸæ•°æ®ç»“æ„
{
  wechat_name: 'äºŒçº§é”€å”®1',
  total_orders: 3,        // âŒ åˆ—å®šä¹‰ç”¨çš„æ˜¯ order_count
  commission_earned: 409.2 // âŒ åˆ—å®šä¹‰ç”¨çš„æ˜¯ total_commission
  // âŒ ç¼ºå¤± payment_method
  // âŒ ç¼ºå¤± created_at  
}

// åˆ—å®šä¹‰æœŸæœ›çš„å­—æ®µ
dataIndex: 'order_count'      // âŒ æ•°æ®ä¸­æ²¡æœ‰
dataIndex: 'payment_method'   // âŒ æ•°æ®ä¸­æ²¡æœ‰
dataIndex: 'total_commission' // âŒ æ•°æ®ä¸­æ²¡æœ‰
dataIndex: 'created_at'       // âŒ æ•°æ®ä¸­æ²¡æœ‰
```

#### **è®¢å•æ•°æ®ç¼ºå¤±å­—æ®µï¼š**
```javascript
// åŸæ•°æ®ç»“æ„
{
  status: 'confirmed_configuration', // âŒ éœ€è¦ä¸­æ–‡æ˜ å°„
  // âŒ ç¼ºå¤± commission_amount
  // âŒ ç¼ºå¤± payment_method 
  // âŒ ç¼ºå¤± created_at
}
```

#### **ä½£é‡‘è®¾ç½®å¤±è´¥ï¼š**
```javascript
// åŸä»£ç è°ƒç”¨äº†ä¸å­˜åœ¨çš„Redux action
await dispatch(updateSecondarySalesCommission(...)) // âŒ åœ¨mockç¯å¢ƒä¸­ä¼šå¤±è´¥
```

## âœ… **ä¿®å¤æ–¹æ¡ˆ**

### 1ï¸âƒ£ **äºŒçº§é”€å”®æ•°æ®å­—æ®µè¡¥é½**

```javascript
secondarySales: [
  {
    id: 1,
    wechat_name: 'äºŒçº§é”€å”®1',
    commission_rate: 0.30,
    // âœ… æ·»åŠ åŒ¹é…çš„å­—æ®µ
    total_orders: 3,
    order_count: 3,              // â† åˆ—å®šä¹‰éœ€è¦çš„å­—æ®µ
    commission_earned: 409.2,
    total_commission: 409.2,     // â† åˆ—å®šä¹‰éœ€è¦çš„å­—æ®µ
    payment_method: 'alipay',    // â† æ–°å¢ï¼šæ”¯ä»˜å®
    created_at: '2025-01-10'     // â† æ–°å¢ï¼šæ³¨å†Œæ—¶é—´
  },
  {
    id: 2,
    wechat_name: 'äºŒçº§é”€å”®2',
    commission_rate: 0.32,
    total_orders: 2,
    order_count: 2,
    commission_earned: 280.32,
    total_commission: 280.32,
    payment_method: 'wechat',    // â† æ–°å¢ï¼šå¾®ä¿¡
    created_at: '2025-01-12'
  },
  {
    id: 3,
    wechat_name: 'äºŒçº§é”€å”®3',
    commission_rate: 0.28,
    total_orders: 3,
    order_count: 3,
    commission_earned: 377.44,
    total_commission: 377.44,
    payment_method: 'crypto',    // â† æ–°å¢ï¼šåŠ å¯†è´§å¸
    created_at: '2025-01-15'
  }
]
```

### 2ï¸âƒ£ **è®¢å•æ•°æ®å­—æ®µè¡¥é½**

```javascript
data: [
  {
    id: 1,
    customer_wechat: 'customer001',
    tradingview_username: 'user001',
    duration: '1month',
    amount: 188,
    commission_amount: 56.4,        // â† æ–°å¢ï¼šä½£é‡‘é‡‘é¢
    status: 'confirmed',            // â† ä¿®å¤ï¼šæ”¹ä¸ºä¸­æ–‡å¯æ˜ å°„çš„çŠ¶æ€
    secondary_sales_name: 'äºŒçº§é”€å”®1',
    payment_method: 'alipay',       // â† æ–°å¢ï¼šæ”¯ä»˜æ–¹å¼
    order_count: 1,                 // â† æ–°å¢ï¼šè®¢å•æ•°é‡
    created_at: '2025-01-10 14:30:00' // â† æ–°å¢ï¼šåˆ›å»ºæ—¶é—´
  },
  {
    id: 2,
    customer_wechat: 'customer002',
    status: 'pending_payment',      // â† å·²æœ‰ä¸­æ–‡æ˜ å°„
    payment_method: 'crypto',
    created_at: '2025-01-12 09:15:00'
  },
  {
    id: 3,
    customer_wechat: 'customer003', 
    status: 'active',               // â† æœ‰ä¸­æ–‡æ˜ å°„ï¼š"å·²ç”Ÿæ•ˆ"
    payment_method: 'wechat',
    created_at: '2025-01-15 16:45:00'
  }
]
```

### 3ï¸âƒ£ **ä½£é‡‘è®¾ç½®åŠŸèƒ½ä¿®å¤**

```javascript
// ä¿®å¤å‰ï¼ˆä¼šå¤±è´¥ï¼‰
await dispatch(updateSecondarySalesCommission({...})).unwrap();

// ä¿®å¤åï¼ˆæ¨¡æ‹Ÿæ›´æ–°æœ¬åœ°æ•°æ®ï¼‰
const updatedSecondarySales = primarySalesStats.secondarySales.map(sales => {
  if (sales.id === selectedSecondarySales.id) {
    return { ...sales, commission_rate: commissionRate };
  }
  return sales;
});

setPrimarySalesStats({
  ...primarySalesStats,
  secondarySales: updatedSecondarySales
});
```

## ğŸ¯ **ä¿®å¤åé¢„æœŸæ•ˆæœ**

### âœ… **äºŒçº§é”€å”®ç®¡ç†è¡¨æ ¼**
- **æ”¶æ¬¾æ–¹å¼ï¼š** æ”¯ä»˜å®ã€å¾®ä¿¡ã€åŠ å¯†è´§å¸ 
- **è®¢å•æ•°é‡ï¼š** 3ã€2ã€3
- **æ³¨å†Œæ—¶é—´ï¼š** 2025/1/10ã€2025/1/12ã€2025/1/15

### âœ… **è®¢å•åˆ—è¡¨**
- **è®¢å•çŠ¶æ€ï¼š** å·²ç¡®è®¤ã€å¾…ä»˜æ¬¾ç¡®è®¤ã€å·²ç”Ÿæ•ˆï¼ˆä¸­æ–‡ï¼‰
- **åˆ›å»ºæ—¶é—´ï¼š** 2025/1/10 14:30:00 ç­‰ï¼ˆæ­£å¸¸æ ¼å¼ï¼‰

### âœ… **ä½£é‡‘è®¾ç½®**
- **åŠŸèƒ½æ­£å¸¸ï¼š** å¯ä»¥è®¾ç½®ä½£é‡‘ç‡ï¼Œç•Œé¢å®æ—¶æ›´æ–°
- **éªŒè¯æœ‰æ•ˆï¼š** InputNumber 0-100% èŒƒå›´éªŒè¯

## ğŸ“ **å­—æ®µæ˜ å°„é€»è¾‘æ€»ç»“**

æ‚¨é—®çš„"ä»€ä¹ˆé€»è¾‘"ï¼Œç°åœ¨æ˜¯è¿™æ ·çš„ï¼š

### **æ”¶æ¬¾æ–¹å¼é€»è¾‘ï¼š**
```javascript
payment_method: 'alipay' â†’ 'æ”¯ä»˜å®'
payment_method: 'wechat' â†’ 'å¾®ä¿¡'  
payment_method: 'crypto' â†’ 'åŠ å¯†è´§å¸'
```

### **è®¢å•æ•°é‡é€»è¾‘ï¼š**
```javascript
order_count: 3 â†’ æ˜¾ç¤º "3"
```

### **æ³¨å†Œæ—¶é—´é€»è¾‘ï¼š**
```javascript
created_at: '2025-01-10' â†’ æ˜¾ç¤º "2025/1/10 00:00:00"
```

### **è®¢å•çŠ¶æ€é€»è¾‘ï¼š**
```javascript
status: 'confirmed' â†’ 'å·²ç¡®è®¤'
status: 'pending_payment' â†’ 'å¾…ä»˜æ¬¾ç¡®è®¤'
status: 'active' â†’ 'å·²ç”Ÿæ•ˆ'
```

## ğŸš€ **éƒ¨ç½²å»ºè®®**

ä¿®å¤å®Œæˆï¼Œå»ºè®®ç«‹å³éƒ¨ç½²éªŒè¯æ•ˆæœï¼