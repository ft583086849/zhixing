# 📋 v2.5.2 二级销售注册链接修复

## 🔴 问题描述
一级销售对账页面的二级销售注册链接无法打开，因为使用了错误的参数。

## 🎯 问题原因

### 错误的链接格式（修复前）：
```
/secondary-sales?sales_code={一级销售的sales_code}
```

### 正确的链接格式（修复后）：
```
/secondary-sales?registration_code={一级销售的secondary_registration_code}
```

### 原因分析：
1. **参数名错误**：使用了 `sales_code` 而不是 `registration_code`
2. **参数值错误**：使用了一级销售自己的 `sales_code` 而不是 `secondary_registration_code`
3. **数据缺失**：返回的销售数据中没有包含 `secondary_registration_code` 字段

## 🔧 修复内容

### 1. `/client/src/pages/PrimarySalesSettlementPage.js`
- **行 821**: 修改链接显示格式
- **行 833**: 修改复制链接的格式
- 使用 `registration_code` 参数和 `secondary_registration_code` 值

### 2. `/client/src/services/supabase.js`
- **行 432**: 在返回的 sales 对象中添加 `secondary_registration_code` 字段
- 确保一级销售对账页面能获取到正确的注册码

## ✅ 修复效果

1. ✅ 二级销售注册链接可以正常打开
2. ✅ 链接参数正确：`?registration_code=SEC...`
3. ✅ 二级销售可以通过链接正常注册到一级销售下

## 🧪 测试方法

1. 访问一级销售对账页面
2. 输入一级销售微信号查询
3. 查看"二级销售注册链接"
4. 复制链接，应该是：`/secondary-sales?registration_code=SEC...`
5. 在新窗口打开链接，应该正常显示注册页面

## 📝 注意事项

- 确保一级销售数据中有 `secondary_registration_code` 字段
- 如果没有该字段，会回退使用 `sales_code`（兼容旧数据）
