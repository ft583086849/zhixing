# MCP 服务器完整指南

## 已安装的 MCP 服务器清单

### 核心开发工具类

#### 1. 文件系统访问 (@modelcontextprotocol/server-filesystem)
- **用途**: 提供文件系统读写访问权限，允许AI直接操作文件
- **主要功能**: 
  - 读取/写入文件
  - 创建/删除目录
  - 遍历目录结构
  - 文件权限管理
- **典型风险**: 
  - 可能意外删除重要文件
  - 需要合理设置ALLOWED_PATHS限制访问范围
  - 写入权限可能导致系统文件被修改

#### 2. Git 版本控制 (@cyanheads/git-mcp-server)
- **用途**: 提供完整的Git操作功能，包括提交、分支、合并等
- **主要功能**:
  - git status, add, commit, push, pull
  - 分支管理 (branch, checkout, merge)
  - 历史记录查看 (log, diff)
  - 远程仓库操作
  - 标签管理
- **典型风险**:
  - 可能强制推送覆盖远程分支
  - 合并冲突处理不当可能丢失代码
  - 敏感信息可能被意外提交

#### 3. GitHub API 集成 (@modelcontextprotocol/server-github)
- **用途**: 通过GitHub API进行仓库管理、Issue、PR操作
- **主要功能**:
  - 创建/管理 Issues 和 Pull Requests
  - 仓库信息查询
  - 用户和组织管理
  - Webhook 配置
- **典型风险**:
  - 需要个人访问令牌，存在泄露风险
  - 可能意外关闭重要Issue或PR
  - API限制可能导致操作失败
- **环境变量**: GITHUB_PERSONAL_ACCESS_TOKEN

#### 4. 代码运行器 (mcp-server-code-runner)
- **用途**: 在沙盒环境中执行代码片段，支持多种编程语言
- **主要功能**:
  - 支持Python、JavaScript、Java等主流语言
  - 实时代码执行和结果返回
  - 安全的沙盒环境
- **典型风险**:
  - 代码执行可能消耗大量系统资源
  - 恶意代码执行风险
  - 网络访问限制可能影响某些代码运行

### 数据库与存储类

#### 5. SQLite 数据库 (mcp-server-sqlite-npx)
- **用途**: SQLite数据库操作，适合轻量级数据存储和查询
- **主要功能**:
  - SQL查询执行
  - 表结构管理
  - 数据导入导出
  - 事务处理
- **典型风险**:
  - SQL注入风险
  - 数据库锁定可能导致操作失败
  - 大量数据操作可能影响性能

### 浏览器自动化类

#### 6. Puppeteer 浏览器控制 (@modelcontextprotocol/server-puppeteer)
- **用途**: 使用Puppeteer进行无头浏览器自动化操作
- **主要功能**:
  - 网页截图和PDF生成
  - 表单自动填写
  - 页面内容抓取
  - 性能分析
- **典型风险**:
  - 浏览器进程可能消耗大量内存
  - 网站反爬虫机制可能阻止操作
  - 敏感信息可能在日志中泄露

#### 7. Playwright 自动化 (@playwright/mcp)
- **用途**: 更强大的跨浏览器自动化工具
- **主要功能**:
  - 支持Chrome、Firefox、Safari
  - 移动端浏览器模拟
  - 并行测试执行
  - 视频录制功能
- **典型风险**:
  - 多浏览器实例可能消耗大量资源
  - 复杂页面交互可能失败
  - 异步操作同步问题

#### 8. Browserbase 云浏览器 (@browserbasehq/mcp-server-browserbase)
- **用途**: 使用云端浏览器进行自动化操作，避免本地资源消耗
- **主要功能**:
  - 云端浏览器实例
  - 规模化浏览器操作
  - 地理位置模拟
  - 高级反检测功能
- **典型风险**:
  - 依赖网络连接稳定性
  - API调用次数限制
  - 成本控制需要注意
- **环境变量**: BROWSERBASE_API_KEY, BROWSERBASE_PROJECT_ID

### 记忆与上下文类

#### 9. 自动记忆系统 (@modelcontextprotocol/server-memory)
- **用途**: 自动记录和回忆对话上下文，提升AI的连续性
- **主要功能**:
  - 自动上下文记录
  - 项目级别记忆管理
  - 知识图谱构建
  - 智能检索
- **典型风险**:
  - 可能记录敏感信息
  - 存储空间逐渐增大
  - 错误信息可能被长期保留
- **环境变量**: AUTO_RECORD=true, PROJECT_PATH, MEMORY_PATH

#### 10. Context7 上下文管理 (context7-mcp-server)
- **用途**: 高级上下文和项目状态管理
- **主要功能**:
  - 项目级别上下文跟踪
  - 代码变更历史记录
  - 智能建议系统
- **典型风险**:
  - 大型项目可能产生过多上下文数据
  - 分析过程可能消耗时间
- **环境变量**: PROJECT_PATH

#### 11. Graphiti 知识图谱 (graph-memory-mcp-server)
- **用途**: 构建知识图谱，管理复杂的关系网络
- **主要功能**:
  - 实体关系管理
  - 知识图谱可视化
  - 智能推理
  - 关系检索
- **典型风险**:
  - 复杂关系可能导致性能问题
  - API密钥管理需要注意安全
- **环境变量**: GRAPHITI_API_KEY

#### 12. 序列化思维 (@modelcontextprotocol/server-sequential-thinking)
- **用途**: 提供结构化的思维过程记录和管理
- **主要功能**:
  - 思维过程序列化
  - 决策路径跟踪
  - 逻辑推理增强
- **典型风险**:
  - 思维过程记录可能很冗长
  - 结构化过程可能限制创造性

### 外部集成类

#### 13. Ollama 本地LLM (@rawveg/ollama-mcp)
- **用途**: 集成Ollama本地大语言模型
- **主要功能**:
  - 本地模型推理
  - 隐私保护
  - 离线工作能力
  - 多模型切换
- **典型风险**:
  - 本地计算资源消耗大
  - 模型质量可能不如云端版本
  - 需要大量存储空间
- **环境变量**: OLLAMA_HOST

#### 14. N8N 工作流集成 (n8n-mcp)
- **用途**: 与N8N工作流平台集成，实现复杂自动化流程
- **主要功能**:
  - 工作流触发和管理
  - 多平台数据集成
  - 自动化任务编排
- **典型风险**:
  - 复杂工作流可能难以调试
  - API密钥和认证管理复杂
  - 外部依赖较多
- **环境变量**: N8N_API_KEY, N8N_HOST

#### 15. Dify AI集成 (@tonlab/dify-mcp-server)
- **用途**: 与Dify AI平台集成，扩展AI应用能力
- **主要功能**:
  - AI应用管理
  - 多模态AI能力
  - 工作流自动化
- **典型风险**:
  - 第三方平台依赖
  - API使用成本
  - 数据隐私问题
- **环境变量**: DIFY_API_KEY, DIFY_BASE_URL

#### 16. 网络请求工具 (@mokei/mcp-fetch)
- **用途**: 提供HTTP请求功能，用于API调用和数据获取
- **主要功能**:
  - GET/POST/PUT/DELETE请求
  - 请求头和参数管理
  - 响应处理
  - 错误处理
- **典型风险**:
  - 可能泄露敏感API密钥
  - 网络请求可能被恶意利用
  - CORS和安全策略限制

#### 17. Notion 集成 (@notionhq/notion-mcp-server)
- **用途**: 与Notion工作空间集成，管理文档和数据库
- **主要功能**:
  - 页面和数据库操作
  - 内容创建和更新
  - 查询和过滤
  - 协作功能
- **典型风险**:
  - 可能意外删除重要文档
  - API限制可能影响操作
  - 权限管理需要谨慎
- **环境变量**: NOTION_API_KEY

## 针对您项目的推荐配置

基于您的项目特点（Web应用开发、数据库集成、销售系统），建议优先使用：

### 高优先级 (日常开发必备)
1. **filesystem** - 文件操作基础
2. **git** - 版本控制
3. **sqlite** - 数据库操作
4. **auto-memory** - 上下文记忆
5. **context7** - 项目上下文管理

### 中优先级 (功能增强)
6. **github** - GitHub集成
7. **puppeteer** - 浏览器自动化测试
8. **fetch** - API调用测试
9. **code-runner** - 代码快速验证

### 低优先级 (特殊场景)
10. **browserbase** - 生产环境浏览器测试
11. **notion** - 文档管理
12. **ollama** - 本地AI推理

## 安全建议

1. **环境变量管理**: 使用 `.env` 文件管理敏感信息，不要硬编码API密钥
2. **权限控制**: 合理设置文件系统访问权限，使用 `ALLOWED_PATHS` 限制范围
3. **网络安全**: 谨慎使用浏览器自动化工具访问敏感网站
4. **数据备份**: 数据库操作前先备份重要数据
5. **监控使用**: 定期检查MCP服务器的资源使用情况

## 故障排除

### 常见问题
1. **MCP服务器启动失败**: 检查Node.js版本和依赖项
2. **环境变量未生效**: 确认变量名正确且已重启Claude
3. **权限错误**: 检查文件和目录权限设置
4. **网络连接问题**: 检查防火墙和网络代理设置

### 性能优化
1. **资源监控**: 监控内存和CPU使用情况
2. **缓存策略**: 合理使用缓存减少重复操作
3. **并发控制**: 避免同时启动过多浏览器实例
4. **日志管理**: 定期清理日志文件

## 更新维护

定期执行以下命令更新MCP服务器：
```bash
npm update -g @modelcontextprotocol/server-filesystem
npm update -g @cyanheads/git-mcp-server
# ... 其他服务器
```

## 配置文件位置

主配置文件：`/Users/zzj/Library/Application Support/Claude/claude_desktop_config.json`

每个MCP服务器的详细配置请参考对应的GitHub仓库和文档。