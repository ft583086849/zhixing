# ğŸ“Š å®æ—¶å¯¹è´¦ç³»ç»Ÿä¼˜åŒ–æ–¹æ¡ˆ

> åˆ›å»ºæ—¶é—´ï¼š2025-08-15
> ä¿®æ­£ï¼šå¯¹è´¦è®°å½•åº”è¯¥å®æ—¶äº§ç”Ÿï¼Œè€Œä¸æ˜¯æ¯æ—¥æ±‡æ€»

---

## ä¸€ã€âŒ åŸè®¾è®¡çš„é—®é¢˜

ä¹‹å‰çš„è®¾è®¡ï¼š
- æ¯ä¸ªé”€å”®æ¯å¤©ä¸€æ¡å¯¹è´¦è®°å½•
- éœ€è¦ç­‰åˆ°å½“å¤©ç»“æŸæ‰èƒ½çœ‹åˆ°å¯¹è´¦æ•°æ®
- æ— æ³•å®æ—¶è¿½è¸ªæ¯ç¬”è®¢å•çš„ä½£é‡‘

**é—®é¢˜**ï¼š
- ä¸å¤Ÿå®æ—¶
- æ— æ³•ç²¾ç¡®å¯¹è´¦
- é”€å”®çœ‹ä¸åˆ°å³æ—¶æ”¶ç›Š

---

## äºŒã€âœ… æ­£ç¡®çš„å¯¹è´¦ç³»ç»Ÿè®¾è®¡

### 1ï¸âƒ£ sales_reconciliationè¡¨ - é”€å”®å¯¹è´¦æ˜ç»†è¡¨ï¼ˆé‡æ–°è®¾è®¡ï¼‰
```sql
CREATE TABLE sales_reconciliation (
  id SERIAL PRIMARY KEY,
  
  -- å¯¹è´¦è®°å½•å·
  reconciliation_number VARCHAR(50) UNIQUE NOT NULL,  -- å¯¹è´¦æµæ°´å·
  
  -- è®¢å•ä¿¡æ¯
  order_id INTEGER NOT NULL,                        -- è®¢å•ID
  order_number VARCHAR(50) NOT NULL,                -- è®¢å•å·
  order_amount DECIMAL(10,2) NOT NULL,              -- è®¢å•é‡‘é¢
  order_type VARCHAR(20),                           -- free/paid/renewal
  order_duration VARCHAR(20),                       -- 7days/1month/3months/6months/1year
  
  -- é”€å”®ä¿¡æ¯
  sales_id INTEGER NOT NULL,                        -- é”€å”®ID
  sales_code VARCHAR(50) NOT NULL,                  -- é”€å”®ä»£ç 
  sales_wechat VARCHAR(100) NOT NULL,               -- é”€å”®å¾®ä¿¡
  sales_type VARCHAR(20) NOT NULL,                  -- primary/secondary/independent
  sales_user_id INTEGER,                            -- æœªæ¥çš„ç”¨æˆ·ID
  
  -- å®¢æˆ·ä¿¡æ¯
  customer_id INTEGER,                              -- å®¢æˆ·ID
  customer_wechat VARCHAR(100),                     -- å®¢æˆ·å¾®ä¿¡
  customer_user_id INTEGER,                         -- æœªæ¥çš„ç”¨æˆ·ID
  
  -- ä½£é‡‘è®¡ç®—
  commission_rate DECIMAL(5,4),                     -- ä½£é‡‘ç‡
  commission_amount DECIMAL(10,2) DEFAULT 0,        -- ä½£é‡‘é‡‘é¢
  commission_type VARCHAR(20),                      -- direct/distribution/bonus
  
  -- åˆ†é”€ä¿¡æ¯ï¼ˆå¦‚æœæ¶‰åŠåˆ†é”€ï¼‰
  is_distribution BOOLEAN DEFAULT false,            -- æ˜¯å¦æ˜¯åˆ†é”€è®¢å•
  primary_sales_id INTEGER,                         -- ä¸€çº§é”€å”®IDï¼ˆå¦‚æœæ˜¯äºŒçº§é”€å”®çš„è®¢å•ï¼‰
  primary_sales_wechat VARCHAR(100),                -- ä¸€çº§é”€å”®å¾®ä¿¡
  primary_commission_amount DECIMAL(10,2),          -- ä¸€çº§é”€å”®åˆ†æˆ
  secondary_sales_id INTEGER,                       -- äºŒçº§é”€å”®ID
  secondary_commission_amount DECIMAL(10,2),        -- äºŒçº§é”€å”®ä½£é‡‘
  
  -- å®æ—¶ä½™é¢ï¼ˆå…³é”®å­—æ®µï¼ï¼‰
  balance_before DECIMAL(10,2) DEFAULT 0,           -- äº¤æ˜“å‰ä½™é¢
  balance_after DECIMAL(10,2) DEFAULT 0,            -- äº¤æ˜“åä½™é¢
  
  -- ç»“ç®—çŠ¶æ€
  settlement_status VARCHAR(20) DEFAULT 'pending',   -- pending/confirmed/settled/paid
  confirmed_at TIMESTAMP,                           -- ç¡®è®¤æ—¶é—´
  settled_at TIMESTAMP,                             -- ç»“ç®—æ—¶é—´
  paid_at TIMESTAMP,                                -- æ”¯ä»˜æ—¶é—´
  payment_batch_id VARCHAR(50),                     -- æ”¯ä»˜æ‰¹æ¬¡å·
  
  -- å¯¹è´¦çŠ¶æ€
  reconciliation_status VARCHAR(20) DEFAULT 'auto',  -- auto/manual/disputed/resolved
  dispute_reason TEXT,                              -- äº‰è®®åŸå› 
  dispute_resolved_at TIMESTAMP,                    -- äº‰è®®è§£å†³æ—¶é—´
  
  -- å¤‡æ³¨
  remark TEXT,                                      -- å¤‡æ³¨ä¿¡æ¯
  
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_recon_order ON sales_reconciliation(order_id);
CREATE INDEX idx_recon_sales ON sales_reconciliation(sales_id, created_at DESC);
CREATE INDEX idx_recon_status ON sales_reconciliation(settlement_status);
CREATE INDEX idx_recon_number ON sales_reconciliation(reconciliation_number);
```

### 2ï¸âƒ£ sales_balanceè¡¨ - é”€å”®ä½™é¢è¡¨ï¼ˆæ–°å¢ï¼‰
```sql
CREATE TABLE sales_balance (
  id SERIAL PRIMARY KEY,
  
  -- é”€å”®ä¿¡æ¯
  sales_id INTEGER UNIQUE NOT NULL,                 -- é”€å”®ID
  sales_code VARCHAR(50) UNIQUE NOT NULL,           -- é”€å”®ä»£ç 
  sales_wechat VARCHAR(100) NOT NULL,               -- é”€å”®å¾®ä¿¡
  sales_type VARCHAR(20) NOT NULL,                  -- primary/secondary/independent
  sales_user_id INTEGER,                            -- æœªæ¥çš„ç”¨æˆ·ID
  
  -- ä½™é¢ä¿¡æ¯ï¼ˆæ ¸å¿ƒï¼‰
  total_earned DECIMAL(10,2) DEFAULT 0,             -- ç´¯è®¡æ”¶å…¥
  total_paid DECIMAL(10,2) DEFAULT 0,               -- ç´¯è®¡å·²æ”¯ä»˜
  current_balance DECIMAL(10,2) DEFAULT 0,          -- å½“å‰ä½™é¢ï¼ˆå¯æç°ï¼‰
  pending_amount DECIMAL(10,2) DEFAULT 0,           -- å¾…ç¡®è®¤é‡‘é¢
  frozen_amount DECIMAL(10,2) DEFAULT 0,            -- å†»ç»“é‡‘é¢ï¼ˆäº‰è®®ä¸­ï¼‰
  
  -- ç»Ÿè®¡ä¿¡æ¯
  total_orders INTEGER DEFAULT 0,                   -- æ€»è®¢å•æ•°
  direct_orders INTEGER DEFAULT 0,                  -- ç›´é”€è®¢å•æ•°
  distribution_orders INTEGER DEFAULT 0,            -- åˆ†é”€è®¢å•æ•°
  
  -- æœ¬æœˆç»Ÿè®¡ï¼ˆå®æ—¶æ›´æ–°ï¼‰
  month_earned DECIMAL(10,2) DEFAULT 0,             -- æœ¬æœˆæ”¶å…¥
  month_orders INTEGER DEFAULT 0,                   -- æœ¬æœˆè®¢å•æ•°
  
  -- ä»Šæ—¥ç»Ÿè®¡ï¼ˆå®æ—¶æ›´æ–°ï¼‰
  today_earned DECIMAL(10,2) DEFAULT 0,             -- ä»Šæ—¥æ”¶å…¥
  today_orders INTEGER DEFAULT 0,                   -- ä»Šæ—¥è®¢å•æ•°
  
  -- æœ€åç»“ç®—ä¿¡æ¯
  last_settlement_date DATE,                        -- æœ€åç»“ç®—æ—¥æœŸ
  last_settlement_amount DECIMAL(10,2),             -- æœ€åç»“ç®—é‡‘é¢
  next_settlement_date DATE,                        -- ä¸‹æ¬¡ç»“ç®—æ—¥æœŸ
  
  -- æ”¯ä»˜ä¿¡æ¯
  payment_method VARCHAR(20),                       -- é»˜è®¤æ”¯ä»˜æ–¹å¼
  payment_account VARCHAR(100),                     -- æ”¯ä»˜è´¦å·
  
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_balance_sales ON sales_balance(sales_id);
CREATE INDEX idx_balance_code ON sales_balance(sales_code);
```

### 3ï¸âƒ£ daily_reconciliation_summaryè¡¨ - æ¯æ—¥å¯¹è´¦æ±‡æ€»è¡¨ï¼ˆç”¨äºæŠ¥è¡¨ï¼‰
```sql
CREATE TABLE daily_reconciliation_summary (
  id SERIAL PRIMARY KEY,
  
  -- æ±‡æ€»ç»´åº¦
  summary_date DATE NOT NULL,                       -- æ±‡æ€»æ—¥æœŸ
  sales_id INTEGER NOT NULL,                        -- é”€å”®ID
  sales_code VARCHAR(50) NOT NULL,                  -- é”€å”®ä»£ç 
  sales_type VARCHAR(20),                           -- é”€å”®ç±»å‹
  
  -- è®¢å•æ±‡æ€»
  total_orders INTEGER DEFAULT 0,                   -- å½“æ—¥æ€»è®¢å•
  free_orders INTEGER DEFAULT 0,                    -- å…è´¹è®¢å•æ•°
  paid_orders INTEGER DEFAULT 0,                    -- ä»˜è´¹è®¢å•æ•°
  renewal_orders INTEGER DEFAULT 0,                 -- ç»­è´¹è®¢å•æ•°
  
  -- é‡‘é¢æ±‡æ€»
  total_revenue DECIMAL(10,2) DEFAULT 0,            -- å½“æ—¥æ€»é”€å”®é¢
  total_commission DECIMAL(10,2) DEFAULT 0,         -- å½“æ—¥æ€»ä½£é‡‘
  direct_commission DECIMAL(10,2) DEFAULT 0,        -- ç›´é”€ä½£é‡‘
  distribution_commission DECIMAL(10,2) DEFAULT 0,  -- åˆ†é”€ä½£é‡‘
  
  -- ç»“ç®—çŠ¶æ€
  confirmed_amount DECIMAL(10,2) DEFAULT 0,         -- å·²ç¡®è®¤é‡‘é¢
  pending_amount DECIMAL(10,2) DEFAULT 0,           -- å¾…ç¡®è®¤é‡‘é¢
  settled_amount DECIMAL(10,2) DEFAULT 0,           -- å·²ç»“ç®—é‡‘é¢
  
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE UNIQUE INDEX idx_daily_summary ON daily_reconciliation_summary(summary_date, sales_id);
```

---

## ä¸‰ã€ğŸ”„ å®æ—¶æ•°æ®æµ

### 1. è®¢å•åˆ›å»ºæ—¶ç«‹å³ç”Ÿæˆå¯¹è´¦è®°å½•
```sql
CREATE OR REPLACE FUNCTION create_reconciliation_record()
RETURNS TRIGGER AS $$
DECLARE
  v_sales_type VARCHAR(20);
  v_primary_commission DECIMAL(10,2);
  v_secondary_commission DECIMAL(10,2);
  v_current_balance DECIMAL(10,2);
BEGIN
  -- è·å–é”€å”®ç±»å‹
  SELECT sales_type INTO v_sales_type 
  FROM secondary_sales 
  WHERE sales_code = NEW.sales_code;
  
  -- è·å–å½“å‰ä½™é¢
  SELECT current_balance INTO v_current_balance
  FROM sales_balance
  WHERE sales_code = NEW.sales_code;
  
  IF v_current_balance IS NULL THEN
    v_current_balance := 0;
  END IF;
  
  -- åˆ›å»ºå¯¹è´¦è®°å½•
  INSERT INTO sales_reconciliation (
    reconciliation_number,
    order_id,
    order_number,
    order_amount,
    sales_id,
    sales_code,
    sales_wechat,
    sales_type,
    customer_wechat,
    commission_rate,
    commission_amount,
    balance_before,
    balance_after,
    settlement_status
  )
  SELECT 
    'REC' || TO_CHAR(NOW(), 'YYYYMMDDHH24MISS') || NEW.id,
    NEW.id,
    NEW.order_number,
    NEW.amount,
    s.id,
    s.sales_code,
    s.wechat_name,
    s.sales_type,
    NEW.customer_wechat,
    NEW.commission_rate,
    NEW.commission_amount,
    v_current_balance,
    v_current_balance + NEW.commission_amount,
    'pending'
  FROM secondary_sales s
  WHERE s.sales_code = NEW.sales_code;
  
  -- å¦‚æœæ˜¯äºŒçº§é”€å”®çš„è®¢å•ï¼Œä¹Ÿè¦ç»™ä¸€çº§é”€å”®åˆ›å»ºå¯¹è´¦è®°å½•
  IF v_sales_type = 'secondary' THEN
    -- è®¡ç®—åˆ†æˆ
    v_secondary_commission := NEW.commission_amount;
    v_primary_commission := NEW.amount * 0.4 - v_secondary_commission;
    
    -- ä¸ºä¸€çº§é”€å”®åˆ›å»ºåˆ†é”€å¯¹è´¦è®°å½•
    INSERT INTO sales_reconciliation (
      reconciliation_number,
      order_id,
      order_number,
      order_amount,
      sales_id,
      sales_code,
      sales_wechat,
      sales_type,
      commission_type,
      commission_amount,
      is_distribution,
      secondary_sales_id,
      secondary_commission_amount,
      settlement_status
    )
    SELECT 
      'REC' || TO_CHAR(NOW(), 'YYYYMMDDHH24MISS') || NEW.id || 'P',
      NEW.id,
      NEW.order_number,
      NEW.amount,
      ps.id,
      ps.sales_code,
      ps.wechat_name,
      'primary',
      'distribution',
      v_primary_commission,
      true,
      s.id,
      v_secondary_commission,
      'pending'
    FROM secondary_sales s
    JOIN secondary_sales ps ON s.primary_sales_id = ps.id
    WHERE s.sales_code = NEW.sales_code;
  END IF;
  
  -- æ›´æ–°é”€å”®ä½™é¢è¡¨
  INSERT INTO sales_balance (
    sales_id,
    sales_code,
    sales_wechat,
    sales_type,
    total_earned,
    current_balance,
    pending_amount,
    total_orders,
    month_earned,
    month_orders,
    today_earned,
    today_orders
  )
  SELECT 
    s.id,
    s.sales_code,
    s.wechat_name,
    s.sales_type,
    NEW.commission_amount,
    0,
    NEW.commission_amount,
    1,
    CASE WHEN DATE_TRUNC('month', NOW()) = DATE_TRUNC('month', NEW.created_at) 
         THEN NEW.commission_amount ELSE 0 END,
    CASE WHEN DATE_TRUNC('month', NOW()) = DATE_TRUNC('month', NEW.created_at) 
         THEN 1 ELSE 0 END,
    CASE WHEN DATE(NOW()) = DATE(NEW.created_at) 
         THEN NEW.commission_amount ELSE 0 END,
    CASE WHEN DATE(NOW()) = DATE(NEW.created_at) 
         THEN 1 ELSE 0 END
  FROM secondary_sales s
  WHERE s.sales_code = NEW.sales_code
  ON CONFLICT (sales_id) DO UPDATE SET
    total_earned = sales_balance.total_earned + NEW.commission_amount,
    pending_amount = sales_balance.pending_amount + NEW.commission_amount,
    total_orders = sales_balance.total_orders + 1,
    month_earned = CASE 
      WHEN DATE_TRUNC('month', NOW()) = DATE_TRUNC('month', NEW.created_at)
      THEN sales_balance.month_earned + NEW.commission_amount
      ELSE sales_balance.month_earned
    END,
    month_orders = CASE 
      WHEN DATE_TRUNC('month', NOW()) = DATE_TRUNC('month', NEW.created_at)
      THEN sales_balance.month_orders + 1
      ELSE sales_balance.month_orders
    END,
    today_earned = CASE 
      WHEN DATE(NOW()) = DATE(NEW.created_at)
      THEN sales_balance.today_earned + NEW.commission_amount
      ELSE sales_balance.today_earned
    END,
    today_orders = CASE 
      WHEN DATE(NOW()) = DATE(NEW.created_at)
      THEN sales_balance.today_orders + 1
      ELSE sales_balance.today_orders
    END,
    updated_at = NOW();
  
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

-- åˆ›å»ºè§¦å‘å™¨
CREATE TRIGGER trigger_create_reconciliation
AFTER INSERT ON orders
FOR EACH ROW EXECUTE FUNCTION create_reconciliation_record();
```

### 2. è®¢å•ç¡®è®¤æ—¶æ›´æ–°å¯¹è´¦çŠ¶æ€
```sql
CREATE OR REPLACE FUNCTION update_reconciliation_status()
RETURNS TRIGGER AS $$
BEGIN
  -- å½“è®¢å•çŠ¶æ€å˜ä¸ºå·²ç¡®è®¤é…ç½®æ—¶
  IF NEW.status = 'confirmed_config' AND OLD.status != 'confirmed_config' THEN
    -- æ›´æ–°å¯¹è´¦è®°å½•çŠ¶æ€
    UPDATE sales_reconciliation
    SET 
      settlement_status = 'confirmed',
      confirmed_at = NOW()
    WHERE order_id = NEW.id;
    
    -- æ›´æ–°é”€å”®ä½™é¢
    UPDATE sales_balance sb
    SET 
      pending_amount = pending_amount - NEW.commission_amount,
      current_balance = current_balance + NEW.commission_amount
    FROM sales_reconciliation sr
    WHERE sr.order_id = NEW.id
      AND sr.sales_id = sb.sales_id;
  END IF;
  
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;
```

---

## å››ã€ğŸ“± å‰ç«¯å®æ—¶å±•ç¤º

### 1. é”€å”®ç«¯å®æ—¶çœ‹åˆ°æ¯ç¬”è®¢å•çš„å¯¹è´¦
```javascript
// å®æ—¶è®¢é˜…å¯¹è´¦è®°å½•
const subscribeToReconciliation = (salesCode) => {
  const channel = supabase.channel('reconciliation');
  
  channel
    .on('postgres_changes', {
      event: 'INSERT',
      schema: 'public',
      table: 'sales_reconciliation',
      filter: `sales_code=eq.${salesCode}`
    }, (payload) => {
      // å®æ—¶æ˜¾ç¤ºæ–°çš„å¯¹è´¦è®°å½•
      addNewReconciliation(payload.new);
      
      // æ›´æ–°ä½™é¢æ˜¾ç¤º
      updateBalance(payload.new.balance_after);
      
      // æ’­æ”¾æç¤ºéŸ³
      playNotificationSound();
      
      // æ˜¾ç¤ºé€šçŸ¥
      showNotification(`æ–°è®¢å•ï¼ä½£é‡‘ +$${payload.new.commission_amount}`);
    })
    .subscribe();
};
```

### 2. å¯¹è´¦é¡µé¢æ˜¾ç¤º
```javascript
const SalesReconciliationRealtime = () => {
  const [records, setRecords] = useState([]);
  const [balance, setBalance] = useState({});
  
  // åŠ è½½å®æ—¶å¯¹è´¦è®°å½•
  const loadReconciliation = async () => {
    // è·å–æœ€è¿‘çš„å¯¹è´¦è®°å½•
    const { data: recentRecords } = await supabase
      .from('sales_reconciliation')
      .select('*')
      .eq('sales_code', salesCode)
      .order('created_at', { ascending: false })
      .limit(100);
    
    // è·å–ä½™é¢ä¿¡æ¯
    const { data: balanceData } = await supabase
      .from('sales_balance')
      .select('*')
      .eq('sales_code', salesCode)
      .single();
    
    setRecords(recentRecords);
    setBalance(balanceData);
  };
  
  return (
    <div>
      {/* ä½™é¢å¡ç‰‡ */}
      <Row gutter={16}>
        <Col span={6}>
          <Card>
            <Statistic 
              title="å½“å‰ä½™é¢" 
              value={balance.current_balance}
              prefix="$"
              valueStyle={{ color: '#3f8600' }}
            />
          </Card>
        </Col>
        <Col span={6}>
          <Card>
            <Statistic 
              title="å¾…ç¡®è®¤" 
              value={balance.pending_amount}
              prefix="$"
              valueStyle={{ color: '#faad14' }}
            />
          </Card>
        </Col>
        <Col span={6}>
          <Card>
            <Statistic 
              title="ä»Šæ—¥æ”¶å…¥" 
              value={balance.today_earned}
              prefix="$"
            />
          </Card>
        </Col>
        <Col span={6}>
          <Card>
            <Statistic 
              title="æœ¬æœˆæ”¶å…¥" 
              value={balance.month_earned}
              prefix="$"
            />
          </Card>
        </Col>
      </Row>
      
      {/* å®æ—¶å¯¹è´¦æ˜ç»† */}
      <Table
        columns={[
          { title: 'æ—¶é—´', dataIndex: 'created_at', render: (t) => moment(t).format('MM-DD HH:mm:ss') },
          { title: 'è®¢å•å·', dataIndex: 'order_number' },
          { title: 'å®¢æˆ·', dataIndex: 'customer_wechat' },
          { title: 'è®¢å•é‡‘é¢', dataIndex: 'order_amount', render: (v) => `$${v}` },
          { title: 'ä½£é‡‘ç‡', dataIndex: 'commission_rate', render: (v) => `${(v*100).toFixed(1)}%` },
          { title: 'ä½£é‡‘', dataIndex: 'commission_amount', render: (v) => `+$${v}` },
          { title: 'ä½™é¢', dataIndex: 'balance_after', render: (v) => `$${v}` },
          { 
            title: 'çŠ¶æ€', 
            dataIndex: 'settlement_status',
            render: (status) => {
              const map = {
                'pending': { text: 'å¾…ç¡®è®¤', color: 'orange' },
                'confirmed': { text: 'å·²ç¡®è®¤', color: 'blue' },
                'settled': { text: 'å·²ç»“ç®—', color: 'green' },
                'paid': { text: 'å·²æ”¯ä»˜', color: 'success' }
              };
              const info = map[status];
              return <Tag color={info.color}>{info.text}</Tag>;
            }
          }
        ]}
        dataSource={records}
        rowKey="id"
      />
    </div>
  );
};
```

---

## äº”ã€âœ… ä¼˜åŠ¿æ€»ç»“

### å®æ—¶æ€§ï¼š
- **æ¯ç¬”è®¢å•ç«‹å³äº§ç”Ÿå¯¹è´¦è®°å½•**
- **ä½™é¢å®æ—¶æ›´æ–°**
- **å‰ç«¯å®æ—¶æ¨é€é€šçŸ¥**

### ç²¾ç¡®æ€§ï¼š
- **æ¯ç¬”äº¤æ˜“éƒ½æœ‰è®°å½•**
- **ä½™é¢å˜åŒ–å¯è¿½æº¯**
- **æ”¯æŒäº‰è®®å’Œè°ƒæ•´**

### çµæ´»æ€§ï¼š
- **æ”¯æŒæ—¥æ±‡æ€»æŠ¥è¡¨**ï¼ˆdaily_reconciliation_summaryï¼‰
- **æ”¯æŒå®æ—¶æ˜ç»†**ï¼ˆsales_reconciliationï¼‰
- **æ”¯æŒä½™é¢æŸ¥è¯¢**ï¼ˆsales_balanceï¼‰

è¿™æ ·è®¾è®¡çš„å¯¹è´¦ç³»ç»Ÿæ‰æ˜¯çœŸæ­£çš„å®æ—¶ç³»ç»Ÿï¼Œé”€å”®å¯ä»¥ç«‹å³çœ‹åˆ°æ¯ç¬”è®¢å•çš„ä½£é‡‘ï¼Œä¸éœ€è¦ç­‰å¾…ï¼