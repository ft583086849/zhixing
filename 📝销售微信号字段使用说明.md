# 销售微信号字段使用说明

## 数据库字段定义

在销售表（`primary_sales` 和 `secondary_sales`）中：
- **`wechat_name`** = 销售微信号
- **`name`** = 收款人姓名（仅在支付宝收款时显示）

## 当前实现逻辑

### 1. 销售管理页面 (AdminSales.js)
✅ **正确实现**
- 从 `sales.wechat_name` 字段获取销售微信号
- 已移除销售ID列的展示（根据需求）

### 2. 客户管理页面 (AdminCustomers.js)
✅ **已修复**
- 显示字段：`sales_wechat_name`
- 数据来源：通过 `sales_code` 关联销售表，获取 `wechat_name` 字段
- **修复内容**：移除了错误使用 `name` 字段作为销售微信号的逻辑

### 3. 订单管理页面 (AdminOrders.js)
✅ **正确实现**
- 优先级查找顺序：
  1. `sales_wechat_name`
  2. `wechat_name`
  3. `primary_sales_wechat`
  4. `secondary_sales_wechat`

## 修改内容总结

### 本次修改（2024年）：

1. **client/src/services/api.js**
   - 修复客户管理的销售微信号获取逻辑
   - 移除错误的 `name` 字段作为备用
   - 仅使用 `wechat_name` 字段作为销售微信号

2. **client/src/components/admin/AdminSales.js**
   - 移除销售ID列展示
   - 移除导出数据中的销售ID字段

## 字段映射关系

```javascript
// 正确的字段映射
销售微信号 = sales.wechat_name
收款人姓名 = sales.name  // 仅支付宝收款时使用

// 错误的映射（已修复）
❌ 销售微信号 = sales.name || sales.wechat_name
```

## 注意事项

1. **不要混淆**：`name` 字段是收款人姓名，不是微信号
2. **支付宝场景**：只有在支付宝收款时才显示 `name` 字段
3. **统一标准**：所有页面都应该使用 `wechat_name` 作为销售微信号
