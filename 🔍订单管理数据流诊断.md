# 订单管理数据流诊断

## 问题现象
订单管理页面显示"暂无数据"

## 数据流链路
1. **前端**: AdminOrders.js → fetchOrders() → dispatch(getAdminOrders())
2. **Redux**: adminSlice.js → getAdminOrders → adminAPI.getOrders()
3. **API**: AdminAPI.getOrders() → SupabaseService.getOrders()
4. **数据库**: orders表查询

## 诊断步骤

### 1. 检查浏览器Console错误
- 打开订单管理页面
- 按F12查看Console
- 查找API请求错误或数据返回问题

### 2. 检查数据库数据
```sql
-- 验证订单数据是否存在
SELECT COUNT(*) as order_count FROM orders;

-- 查看最新几条订单
SELECT 
    order_number,
    sales_code,
    customer_wechat,
    amount,
    actual_payment_amount,
    status,
    created_at
FROM orders 
ORDER BY created_at DESC 
LIMIT 5;
```

### 3. 检查API响应
- AdminAPI.getOrders() 是否正确返回数据
- SupabaseService.getOrders() 查询是否有问题
- 字段映射是否正确

## 可能的问题
1. **权限问题**: Supabase RLS策略
2. **字段映射**: 前端期望字段与后端返回不匹配
3. **缓存问题**: AdminAPI缓存返回空数据
4. **查询错误**: SQL查询失败

## 解决方案
根据诊断结果决定具体修复方案
