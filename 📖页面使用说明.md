# 📖 销售页面使用说明

## 🔍 问题说明

您提到的"进不去页面"实际上是因为这两个页面都是**查询式页面**，不是直接显示数据的页面。

### 页面特点：
- ✅ 页面本身是可以访问的
- ✅ 需要输入微信号后点击查询才能看到数据
- ✅ 不会自动显示任何销售的数据

## 📱 使用方法

### 1. 一级销售页面（张三）
**访问地址**: https://zhixing-seven.vercel.app/primary-sales-settlement

**使用步骤**：
1. 打开页面后，会看到一个查询表单
2. 在"微信号"输入框中输入：`张三`
3. 点击"查询"按钮
4. 如果张三在数据库中存在，会显示：
   - 佣金统计
   - 二级销售管理
   - 订单列表
   - 催单功能

### 2. 二级销售页面（王五）
**访问地址**: https://zhixing-seven.vercel.app/sales-reconciliation

**使用步骤**：
1. 打开页面后，会看到一个查询表单
2. 在"销售微信号"输入框中输入：`王五`
3. 点击"查询"按钮
4. 如果王五在数据库中存在，会显示：
   - 销售信息
   - 统计数据（总订单、总金额、总佣金等）
   - 订单列表
   - 待催单订单

## ❌ 常见问题

### 问题1：输入微信号后查询无结果
**原因**：销售不在数据库中
**解决**：
1. 在 Supabase 中运行 `🔍检查销售数据存在性.sql` 检查
2. 如果不存在，需要先注册销售

### 问题2：页面显示空白
**原因**：页面加载失败或缓存问题
**解决**：
1. 强制刷新页面（Ctrl+F5）
2. 清除浏览器缓存
3. 检查控制台是否有错误

### 问题3：查询按钮点击无反应
**原因**：API 未正确加载
**解决**：
1. 打开浏览器控制台（F12）
2. 运行 `🔍诊断页面访问问题.js` 脚本
3. 查看诊断结果

## 🛠️ 诊断步骤

1. **检查销售是否存在**
   在 Supabase SQL Editor 中运行：
   ```sql
   -- 检查张三
   SELECT * FROM primary_sales WHERE wechat_name = '张三';
   
   -- 检查王五
   SELECT * FROM secondary_sales WHERE wechat_name = '王五';
   ```

2. **如果不存在，添加测试数据**
   ```sql
   -- 添加张三（一级销售）
   INSERT INTO primary_sales (
       wechat_name, sales_code, commission_rate,
       payment_method, payment_account,
       secondary_registration_code,
       created_at, updated_at
   ) VALUES (
       '张三',
       'PRI_ZHANGSAN_001',
       0.4,
       'alipay',
       'zhangsan@alipay.com',
       'SEC_REG_001',
       now(), now()
   );
   
   -- 添加王五（二级销售，属于张三）
   INSERT INTO secondary_sales (
       wechat_name, sales_code, commission_rate,
       primary_sales_id,
       payment_method, payment_account,
       created_at, updated_at
   ) VALUES (
       '王五',
       'SEC_WANGWU_001',
       0.1,
       (SELECT id FROM primary_sales WHERE wechat_name = '张三'),
       'bank_transfer',
       '王五的银行账号',
       now(), now()
   );
   ```

3. **添加测试订单**（可选）
   ```sql
   -- 为张三添加订单
   INSERT INTO orders (
       customer_wechat, tradingview_username,
       amount, sales_code,
       status, config_confirmed,
       created_at, updated_at
   ) VALUES (
       '客户1', 'tv_user1',
       1000, 'PRI_ZHANGSAN_001',
       'completed', true,
       now(), now()
   );
   
   -- 为王五添加订单
   INSERT INTO orders (
       customer_wechat, tradingview_username,
       amount, sales_code,
       status, config_confirmed,
       created_at, updated_at
   ) VALUES (
       '客户2', 'tv_user2',
       2000, 'SEC_WANGWU_001',
       'completed', true,
       now(), now()
   );
   ```

## ✅ 验证成功标志

当一切正常时：
1. 输入微信号后能查询到数据
2. 显示正确的统计信息
3. 订单列表正常显示
4. 没有控制台错误

## 📞 如果还有问题

1. 运行诊断脚本 `🔍诊断页面访问问题.js`
2. 检查数据库 `🔍检查销售数据存在性.sql`
3. 查看浏览器控制台错误信息
4. 提供具体的错误截图或信息
