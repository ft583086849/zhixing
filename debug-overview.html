<!DOCTYPE html>
<html>
<head>
    <title>è°ƒè¯•AdminOverviewæ•°æ®</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
        .success { color: green; }
        .error { color: red; }
        pre { background: #f5f5f5; padding: 10px; }
    </style>
</head>
<body>
    <h1>ğŸ” è°ƒè¯•AdminOverviewæ•°æ®æ˜¾ç¤ºé—®é¢˜</h1>
    
    <div class="section">
        <h2>1. ç¯å¢ƒå˜é‡æ£€æŸ¥</h2>
        <p>è®¿é—®: <a href="http://localhost:3000/test-env" target="_blank">http://localhost:3000/test-env</a></p>
        <p>åº”è¯¥æ˜¾ç¤º: REACT_APP_ENABLE_NEW_STATS: true</p>
    </div>
    
    <div class="section">
        <h2>2. æ•°æ®åº“æ•°æ®</h2>
        <pre id="db-data">åŠ è½½ä¸­...</pre>
    </div>
    
    <div class="section">
        <h2>3. æµè§ˆå™¨æ§åˆ¶å°æ£€æŸ¥</h2>
        <p>1. æ‰“å¼€ <a href="http://localhost:3000/admin/dashboard" target="_blank">http://localhost:3000/admin/dashboard</a></p>
        <p>2. æŒ‰F12æ‰“å¼€æ§åˆ¶å°</p>
        <p>3. åœ¨æ§åˆ¶å°æ‰§è¡Œä»¥ä¸‹å‘½ä»¤:</p>
        <pre>
// æ£€æŸ¥Redux storeä¸­çš„æ•°æ®
const state = window.store?.getState();
console.log('Statsæ•°æ®:', state?.admin?.stats);

// æ£€æŸ¥ç¯å¢ƒå˜é‡
console.log('ç¯å¢ƒå˜é‡:', process.env.REACT_APP_ENABLE_NEW_STATS);
        </pre>
    </div>
    
    <div class="section">
        <h2>4. è§£å†³æ–¹æ¡ˆ</h2>
        <div id="solution"></div>
    </div>
    
    <script>
        // åŠ è½½æ•°æ®åº“æ•°æ®
        fetch('http://localhost:3000/test-env')
            .then(r => r.text())
            .then(html => {
                const envMatch = html.match(/REACT_APP_ENABLE_NEW_STATS: (\w+)/);
                const env = envMatch ? envMatch[1] : 'undefined';
                
                document.getElementById('db-data').innerHTML = `
æ•°æ®åº“ä¸­çš„å®é™…æ•°æ®:
- æ€»è®¢å•: 286
- æ´»è·ƒè®¢å•: 205  
- æ€»é‡‘é¢: $3,392
- æ€»ä½£é‡‘: $752.20

å‰ç«¯ç¯å¢ƒå˜é‡:
- REACT_APP_ENABLE_NEW_STATS: ${env}
- çŠ¶æ€: ${env === 'true' ? 'âœ… æ­£ç¡®' : 'âŒ é”™è¯¯'}
                `;
                
                // æ˜¾ç¤ºè§£å†³æ–¹æ¡ˆ
                const solutions = [];
                
                if (env !== 'true') {
                    solutions.push(`
                        <div class="error">
                            <h3>âŒ ç¯å¢ƒå˜é‡æœªæ­£ç¡®è®¾ç½®</h3>
                            <p>1. ç¼–è¾‘ client/.env æ–‡ä»¶</p>
                            <p>2. ç¡®ä¿åŒ…å«: REACT_APP_ENABLE_NEW_STATS=true</p>
                            <p>3. é‡å¯æœåŠ¡: npm start</p>
                        </div>
                    `);
                }
                
                solutions.push(`
                    <div>
                        <h3>ğŸ”§ æ‰‹åŠ¨æ›´æ–°æ•°æ®</h3>
                        <p>åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ:</p>
                        <pre>node update-stats-final.js</pre>
                    </div>
                `);
                
                solutions.push(`
                    <div>
                        <h3>ğŸ”„ æ¸…é™¤ç¼“å­˜</h3>
                        <p>1. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°(F12)</p>
                        <p>2. å³é”®åˆ·æ–°æŒ‰é’®ï¼Œé€‰æ‹©"æ¸…ç©ºç¼“å­˜å¹¶ç¡¬æ€§é‡æ–°åŠ è½½"</p>
                        <p>3. æˆ–æ‰§è¡Œ: localStorage.clear()</p>
                    </div>
                `);
                
                document.getElementById('solution').innerHTML = solutions.join('');
            })
            .catch(err => {
                document.getElementById('db-data').innerHTML = 'âŒ åŠ è½½å¤±è´¥: ' + err.message;
            });
    </script>
</body>
</html>