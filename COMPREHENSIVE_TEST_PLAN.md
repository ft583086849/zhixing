# 知行财库系统完整测试计划

## 📋 测试文档信息
- **创建时间**: 2025-08-01
- **最后更新**: 2025-08-01
- **测试范围**: 全系统功能测试
- **测试目标**: 确保所有功能100%正常工作
- **测试方法**: 系统化、分步骤、记录问题
- **测试原则**: 错题本方法 + 部署等待原则

---

## 🎯 测试目标

### 核心目标
1. **订单创建功能100%成功**
2. **所有页面功能正常**
3. **所有业务流程完整**
4. **数据回流功能正常**
5. **管理员系统完整可用**

### 测试原则
- **错题本方法**: 发现问题立即记录，记录每个检查点的正确和错误解决方案及其指标
- **部署等待原则**: 所有部署都要等待前一个部署完成后再开始新的部署
- **全面测试**: 测试所有功能模块和业务流程
- **问题追踪**: 每个问题都要有明确的修复状态和验证记录

---

## 📋 错题本记录模板

### 问题记录格式
```
## 问题ID: [TYPE]-[序号]

### 基本信息
- **问题类型**: [功能/性能/UI/数据/集成]
- **严重程度**: [高/中/低]
- **发现时间**: [YYYY-MM-DD HH:MM:SS]
- **发现页面/流程**: [具体页面或流程名称]
- **测试阶段**: [页面测试/流程测试/集成测试]

### 问题描述
[详细描述问题现象]

### 复现步骤
1. [步骤1]
2. [步骤2]
3. [步骤3]

### 期望结果
[描述期望的正确行为]

### 实际结果
[描述实际观察到的错误行为]

### 错误信息
```json
[错误响应或日志]
```

### 问题分析
[分析问题的根本原因]

### 解决方案
1. [解决方案1]
2. [解决方案2]
3. [解决方案3]

### 修复状态
- [ ] 未修复
- [ ] 修复中
- [x] 已修复
- [x] 已验证

### 修复记录
- **修复时间**: [YYYY-MM-DD HH:MM:SS]
- **修复方法**: [具体修复方法]
- **验证结果**: [修复后的验证结果]
```

---

## 🔧 API端点详细测试清单

### 1. 健康检查API
**端点**: `GET /api/health`

**测试项目**:
- [ ] 端点可访问性
- [ ] 响应格式正确
- [ ] 数据库连接状态
- [ ] 系统状态信息
- [ ] 响应时间 < 3秒
- [ ] 错误处理机制

**详细测试步骤**:
1. 发送GET请求到 `/api/health`
2. 验证响应状态码为200
3. 验证响应格式为JSON
4. 验证success字段为true
5. 验证data字段包含必要信息
6. 验证database.connected为true
7. 验证响应时间 < 3秒
8. 测试网络异常情况

### 2. 认证API
**端点**: `POST /api/auth` (登录)
**端点**: `GET /api/auth?path=verify` (验证)

**测试项目**:
- [ ] 管理员登录功能
- [ ] 错误凭据处理
- [ ] Token生成
- [ ] Token验证
- [ ] 权限控制
- [ ] 会话管理
- [ ] 错误响应格式

**详细测试步骤**:
1. **登录测试**
   - 使用正确凭据登录
   - 使用错误用户名登录
   - 使用错误密码登录
   - 使用空凭据登录
   - 验证响应格式
   - 验证Token生成

2. **Token验证测试**
   - 使用有效Token验证
   - 使用无效Token验证
   - 使用过期Token验证
   - 使用空Token验证

3. **权限控制测试**
   - 未认证访问受保护资源
   - 认证后访问受保护资源
   - 不同权限级别访问

### 3. 销售管理API

#### 3.1 销售列表API
**端点**: `GET /api/sales?path=list`

**测试项目**:
- [ ] 获取销售列表
- [ ] 分页功能
- [ ] 筛选功能
- [ ] 排序功能
- [ ] 权限验证
- [ ] 数据格式正确

**详细测试步骤**:
1. 发送GET请求获取销售列表
2. 验证响应状态码为200
3. 验证响应格式为JSON
4. 验证success字段为true
5. 验证data字段为数组
6. 验证每个销售记录包含必要字段
7. 测试分页参数
8. 测试筛选参数
9. 测试排序参数

#### 3.2 销售筛选API
**端点**: `GET /api/sales?path=filter&sales_type=[type]`

**测试项目**:
- [ ] 全部销售筛选
- [ ] 一级销售筛选
- [ ] 二级销售筛选
- [ ] 参数验证
- [ ] 结果准确性

**详细测试步骤**:
1. 测试 `sales_type=all`
2. 测试 `sales_type=primary`
3. 测试 `sales_type=secondary`
4. 测试无效参数
5. 验证筛选结果正确性

#### 3.3 销售创建API
**端点**: `POST /api/sales?path=create`

**测试项目**:
- [ ] 创建一级销售
- [ ] 创建二级销售
- [ ] 数据验证
- [ ] 微信名去重
- [ ] 支付方式验证
- [ ] 链接生成

**详细测试步骤**:
1. 创建一级销售记录
2. 验证必填字段
3. 测试微信名重复
4. 测试支付方式验证
5. 验证链接生成
6. 验证数据保存

### 4. 一级销售API

#### 4.1 一级销售列表API
**端点**: `GET /api/primary-sales?path=list`

**测试项目**:
- [ ] 获取一级销售列表
- [ ] 数据完整性
- [ ] 权限验证
- [ ] 响应格式

**详细测试步骤**:
1. 发送GET请求获取一级销售列表
2. 验证响应格式
3. 验证数据完整性
4. 验证权限控制

#### 4.2 一级销售创建API
**端点**: `POST /api/primary-sales?path=create`

**测试项目**:
- [ ] 一级销售注册
- [ ] 双链接生成
- [ ] 佣金比例设置
- [ ] 数据验证

**详细测试步骤**:
1. 提交一级销售注册信息
2. 验证双链接生成（注册链接+销售链接）
3. 验证佣金比例设置
4. 验证数据保存

#### 4.3 一级销售结算API
**端点**: `GET /api/primary-sales?path=settlement`

**测试项目**:
- [ ] 获取结算数据
- [ ] 二级销售列表
- [ ] 佣金统计
- [ ] 订单统计

**详细测试步骤**:
1. 获取一级销售结算数据
2. 验证二级销售列表
3. 验证佣金统计
4. 验证订单统计

### 5. 二级销售API

#### 5.1 二级销售列表API
**端点**: `GET /api/secondary-sales?path=list`

**测试项目**:
- [ ] 获取二级销售列表
- [ ] 数据完整性
- [ ] 权限验证

**详细测试步骤**:
1. 获取二级销售列表
2. 验证数据完整性
3. 验证权限控制

#### 5.2 二级销售注册API
**端点**: `POST /api/secondary-sales?path=register`

**测试项目**:
- [ ] 二级销售注册
- [ ] 注册码验证
- [ ] 链接生成
- [ ] 数据关联

**详细测试步骤**:
1. 使用注册码注册二级销售
2. 验证注册码有效性
3. 验证销售链接生成
4. 验证与一级销售关联

### 6. 订单管理API

#### 6.1 订单列表API
**端点**: `GET /api/orders?path=list`

**测试项目**:
- [ ] 获取订单列表
- [ ] 分页功能
- [ ] 筛选功能
- [ ] 排序功能
- [ ] 数据完整性

**详细测试步骤**:
1. 获取订单列表
2. 验证分页功能
3. 验证筛选功能
4. 验证排序功能
5. 验证数据完整性

#### 6.2 订单创建API
**端点**: `POST /api/orders?path=create`

**测试项目**:
- [ ] 创建订单
- [ ] 价格计算
- [ ] 佣金计算
- [ ] 文件上传
- [ ] 数据验证

**详细测试步骤**:
1. 提交订单信息
2. 验证价格计算
3. 验证佣金计算
4. 验证文件上传
5. 验证数据保存

#### 6.3 订单详情API
**端点**: `GET /api/orders?path=detail&id=[orderId]`

**测试项目**:
- [ ] 获取订单详情
- [ ] 数据完整性
- [ ] 权限验证

**详细测试步骤**:
1. 获取订单详情
2. 验证数据完整性
3. 验证权限控制

#### 6.4 订单状态更新API
**端点**: `PUT /api/orders?path=update-status`

**测试项目**:
- [ ] 更新订单状态
- [ ] 状态验证
- [ ] 权限验证

**详细测试步骤**:
1. 更新订单状态
2. 验证状态变更
3. 验证权限控制

### 7. 管理员API

#### 7.1 管理员统计API
**端点**: `GET /api/admin?path=stats`

**测试项目**:
- [ ] 获取统计数据
- [ ] 数据准确性
- [ ] 实时更新
- [ ] 权限验证

**详细测试步骤**:
1. 获取统计数据
2. 验证数据准确性
3. 验证实时更新
4. 验证权限控制

#### 7.2 管理员概览API
**端点**: `GET /api/admin?path=overview`

**测试项目**:
- [ ] 获取概览数据
- [ ] 图表数据
- [ ] 实时统计
- [ ] 数据格式

**详细测试步骤**:
1. 获取概览数据
2. 验证图表数据
3. 验证实时统计
4. 验证数据格式

#### 7.3 管理员订单管理API
**端点**: `GET /api/admin?path=orders`

**测试项目**:
- [ ] 获取订单管理数据
- [ ] 筛选功能
- [ ] 导出功能
- [ ] 批量操作

**详细测试步骤**:
1. 获取订单管理数据
2. 验证筛选功能
3. 验证导出功能
4. 验证批量操作

#### 7.4 管理员销售管理API
**端点**: `GET /api/admin?path=sales`

**测试项目**:
- [ ] 获取销售管理数据
- [ ] 层级关系
- [ ] 佣金统计
- [ ] 数据导出

**详细测试步骤**:
1. 获取销售管理数据
2. 验证层级关系
3. 验证佣金统计
4. 验证数据导出

#### 7.5 管理员数据导出API
**端点**: `GET /api/admin?path=export`

**测试项目**:
- [ ] 订单数据导出
- [ ] 销售数据导出
- [ ] 佣金数据导出
- [ ] 文件格式

**详细测试步骤**:
1. 导出订单数据
2. 导出销售数据
3. 导出佣金数据
4. 验证文件格式

### 8. 佣金管理API

#### 8.1 佣金计算API
**端点**: `POST /api/orders-commission?path=calculate`

**测试项目**:
- [ ] 佣金计算逻辑
- [ ] 比例验证
- [ ] 金额计算
- [ ] 数据保存

**详细测试步骤**:
1. 计算订单佣金
2. 验证计算逻辑
3. 验证比例设置
4. 验证金额计算
5. 验证数据保存

#### 8.2 佣金统计API
**端点**: `GET /api/orders-commission?path=stats`

**测试项目**:
- [ ] 佣金统计
- [ ] 层级统计
- [ ] 时间统计
- [ ] 数据准确性

**详细测试步骤**:
1. 获取佣金统计
2. 验证层级统计
3. 验证时间统计
4. 验证数据准确性

### 9. 销售层级API

#### 9.1 层级关系API
**端点**: `GET /api/sales-hierarchy?path=relationships`

**测试项目**:
- [ ] 获取层级关系
- [ ] 关系验证
- [ ] 数据完整性

**详细测试步骤**:
1. 获取层级关系
2. 验证关系正确性
3. 验证数据完整性

#### 9.2 层级统计API
**端点**: `GET /api/sales-hierarchy?path=stats`

**测试项目**:
- [ ] 层级统计
- [ ] 数据准确性
- [ ] 实时更新

**详细测试步骤**:
1. 获取层级统计
2. 验证数据准确性
3. 验证实时更新

### 10. 支付配置API

#### 10.1 支付配置获取API
**端点**: `GET /api/payment-config?path=get`

**测试项目**:
- [ ] 获取支付配置
- [ ] 配置完整性
- [ ] 权限验证

**详细测试步骤**:
1. 获取支付配置
2. 验证配置完整性
3. 验证权限控制

#### 10.2 支付配置更新API
**端点**: `PUT /api/payment-config?path=update`

**测试项目**:
- [ ] 更新支付配置
- [ ] 数据验证
- [ ] 权限验证

**详细测试步骤**:
1. 更新支付配置
2. 验证数据有效性
3. 验证权限控制

---

## 📄 页面功能详细测试清单

### 1. 认证相关页面

#### 1.1 AdminLoginPage (/admin)
**页面功能**:
- [ ] 页面正常加载
- [ ] 表单验证功能
- [ ] 登录成功跳转
- [ ] 登录失败提示
- [ ] 错误处理机制
- [ ] 页面标题设置
- [ ] 响应式布局
- [ ] 可访问性支持
- [ ] 浏览器兼容性
- [ ] 记住密码功能
- [ ] 密码强度提示
- [ ] 登录状态保持

**详细测试步骤**:
1. **页面加载测试**
   - 访问 `/admin` 页面
   - 验证页面标题
   - 验证页面元素加载
   - 验证CSS样式加载

2. **表单验证测试**
   - 测试空用户名提交
   - 测试空密码提交
   - 测试特殊字符输入
   - 测试超长输入
   - 测试SQL注入尝试

3. **登录功能测试**
   - 使用正确凭据登录
   - 使用错误用户名登录
   - 使用错误密码登录
   - 验证登录成功跳转
   - 验证登录失败提示

4. **用户体验测试**
   - 测试响应式布局
   - 测试键盘导航
   - 测试屏幕阅读器
   - 测试不同浏览器
   - 测试移动端显示

#### 1.2 AuthTestPage (/auth-test)
**页面功能**:
- [ ] 页面正常加载
- [ ] 显示当前认证状态
- [ ] 登录功能测试
- [ ] 登出功能测试
- [ ] Token存储验证
- [ ] 状态更新显示
- [ ] 错误状态处理
- [ ] 网络异常处理
- [ ] Token过期处理
- [ ] 自动刷新功能

**详细测试步骤**:
1. **状态显示测试**
   - 查看初始认证状态
   - 验证状态显示正确性
   - 测试状态更新显示

2. **登录登出测试**
   - 点击登录按钮
   - 验证状态更新
   - 点击登出按钮
   - 验证状态重置

3. **异常处理测试**
   - 测试网络断开
   - 测试Token过期
   - 测试服务器错误
   - 验证错误提示

### 2. 销售管理页面

#### 2.1 SalesPage (/sales)
**页面功能**:
- [ ] 页面正常加载
- [ ] 销售信息表单
- [ ] 收款方式选择
- [ ] 链接生成功能
- [ ] 表单验证
- [ ] 提交成功处理
- [ ] 微信名去重验证
- [ ] 支付地址验证
- [ ] 表单重置功能
- [ ] 错误提示显示
- [ ] 复制链接功能
- [ ] 预览功能

**详细测试步骤**:
1. **表单功能测试**
   - 填写销售信息
   - 选择收款方式
   - 验证表单验证
   - 测试表单重置

2. **链接生成测试**
   - 提交表单生成链接
   - 验证链接有效性
   - 测试复制链接功能
   - 测试链接预览

3. **数据验证测试**
   - 测试微信名重复
   - 测试支付地址格式
   - 测试必填字段验证
   - 测试特殊字符处理

#### 2.2 PrimarySalesPage (/primary-sales)
**页面功能**:
- [ ] 页面正常加载
- [ ] 一级销售注册表单
- [ ] 双链接生成功能
- [ ] 微信名去重验证
- [ ] 表单验证
- [ ] 提交成功处理
- [ ] 链接有效性验证
- [ ] 支付方式配置
- [ ] 佣金比例设置
- [ ] 数据持久化
- [ ] 二级销售管理
- [ ] 结算功能

**详细测试步骤**:
1. **注册功能测试**
   - 填写一级销售信息
   - 设置佣金比例
   - 配置支付方式
   - 提交注册表单

2. **链接生成测试**
   - 验证双链接生成
   - 测试注册链接
   - 测试销售链接
   - 验证链接有效性

3. **管理功能测试**
   - 查看二级销售列表
   - 设置二级销售佣金
   - 查看结算数据
   - 测试催单功能

#### 2.3 SecondarySalesRegistrationPage (/secondary-registration/:code)
**页面功能**:
- [ ] 页面正常加载
- [ ] 注册码验证
- [ ] 二级销售注册表单
- [ ] 表单验证
- [ ] 注册成功处理
- [ ] 链接生成功能
- [ ] 注册码过期处理
- [ ] 重复注册处理
- [ ] 数据关联验证
- [ ] 权限验证
- [ ] 错误提示

**详细测试步骤**:
1. **注册码验证测试**
   - 使用有效注册码访问
   - 使用无效注册码测试
   - 使用过期注册码测试
   - 验证错误提示

2. **注册功能测试**
   - 填写二级销售信息
   - 验证表单验证
   - 提交注册表单
   - 验证注册成功

3. **链接生成测试**
   - 验证销售链接生成
   - 测试链接有效性
   - 验证数据关联

### 3. 用户购买页面

#### 3.1 PurchasePage (/purchase/:linkCode)
**页面功能**:
- [ ] 页面正常加载
- [ ] 销售信息显示
- [ ] 价格计算功能
- [ ] 时长选择功能
- [ ] 支付方式选择
- [ ] 表单验证
- [ ] 订单提交功能
- [ ] 截图上传功能
- [ ] 链接有效性验证
- [ ] 支付信息显示
- [ ] 订单状态跟踪
- [ ] 错误处理机制
- [ ] 文件格式验证
- [ ] 文件大小限制

**详细测试步骤**:
1. **页面加载测试**
   - 使用有效链接访问
   - 使用无效链接测试
   - 验证销售信息显示
   - 验证价格计算

2. **购买流程测试**
   - 选择购买时长
   - 选择支付方式
   - 填写用户信息
   - 上传支付截图
   - 提交订单

3. **文件上传测试**
   - 测试图片格式
   - 测试文件大小
   - 测试文件类型
   - 验证上传成功

4. **订单处理测试**
   - 验证订单创建
   - 验证状态更新
   - 验证数据保存
   - 验证佣金计算

### 4. 管理员系统页面

#### 4.1 AdminDashboardPage (/admin/*)
**页面功能**:
- [ ] 页面正常加载
- [ ] 认证保护机制
- [ ] 统计数据显示
- [ ] 导航菜单功能
- [ ] 各子页面访问
- [ ] 数据刷新功能
- [ ] 权限控制
- [ ] 数据导出功能
- [ ] 搜索筛选功能
- [ ] 分页功能
- [ ] 实时数据更新
- [ ] 错误处理机制
- [ ] 响应式布局
- [ ] 主题切换

**详细测试步骤**:
1. **认证保护测试**
   - 未登录访问测试
   - 登录后访问测试
   - Token过期处理
   - 权限验证

2. **导航功能测试**
   - 测试导航菜单
   - 测试页面跳转
   - 测试面包屑导航
   - 测试返回功能

3. **数据功能测试**
   - 测试数据刷新
   - 测试搜索筛选
   - 测试分页功能
   - 测试数据导出

#### 4.2 AdminOverviewPage (/admin/overview)
**页面功能**:
- [ ] 页面正常加载
- [ ] 统计数据准确
- [ ] 图表显示正常
- [ ] 数据实时更新
- [ ] 筛选功能正常
- [ ] 导出功能正常
- [ ] 响应式布局
- [ ] 加载状态显示
- [ ] 数据钻取功能
- [ ] 时间范围选择

**详细测试步骤**:
1. **统计数据显示测试**
   - 验证统计数据准确性
   - 测试图表显示
   - 测试数据实时更新
   - 验证数据格式

2. **交互功能测试**
   - 测试筛选功能
   - 测试导出功能
   - 测试时间范围选择
   - 测试数据钻取

3. **用户体验测试**
   - 测试响应式布局
   - 测试加载状态
   - 测试错误处理
   - 测试空数据状态

#### 4.3 AdminOrdersPage (/admin/orders)
**页面功能**:
- [ ] 页面正常加载
- [ ] 订单列表显示
- [ ] 订单详情查看
- [ ] 订单状态更新
- [ ] 订单筛选功能
- [ ] 订单搜索功能
- [ ] 订单导出功能
- [ ] 分页功能
- [ ] 批量操作功能
- [ ] 订单统计
- [ ] 截图查看功能

**详细测试步骤**:
1. **订单列表测试**
   - 查看订单列表
   - 测试分页功能
   - 测试筛选功能
   - 测试搜索功能

2. **订单操作测试**
   - 查看订单详情
   - 更新订单状态
   - 批量操作订单
   - 导出订单数据

3. **订单统计测试**
   - 查看订单统计
   - 验证统计数据
   - 测试时间筛选
   - 测试状态筛选

#### 4.4 AdminSalesPage (/admin/sales)
**页面功能**:
- [ ] 页面正常加载
- [ ] 销售列表显示
- [ ] 销售详情查看
- [ ] 销售类型筛选
- [ ] 层级关系显示
- [ ] 佣金统计显示
- [ ] 销售数据导出
- [ ] 销售状态管理
- [ ] 销售搜索功能
- [ ] 分页功能
- [ ] 销售统计图表

**详细测试步骤**:
1. **销售列表测试**
   - 查看销售列表
   - 测试类型筛选
   - 测试搜索功能
   - 测试分页功能

2. **销售详情测试**
   - 查看销售详情
   - 查看层级关系
   - 查看佣金统计
   - 管理销售状态

3. **数据导出测试**
   - 导出销售数据
   - 验证导出格式
   - 测试筛选导出
   - 测试批量导出

### 5. 结算和佣金页面

#### 5.1 PrimarySalesSettlementPage (/primary-sales-settlement)
**页面功能**:
- [ ] 页面正常加载
- [ ] 二级销售列表
- [ ] 佣金设置功能
- [ ] 订单统计显示
- [ ] 催单功能
- [ ] 移除二级销售
- [ ] 数据导出功能
- [ ] 实时数据更新
- [ ] 佣金计算显示
- [ ] 结算历史记录
- [ ] 数据筛选功能

**详细测试步骤**:
1. **二级销售管理测试**
   - 查看二级销售列表
   - 设置佣金比例
   - 移除二级销售
   - 查看结算数据

2. **佣金管理测试**
   - 查看佣金计算
   - 设置佣金比例
   - 查看佣金统计
   - 导出佣金数据

3. **订单管理测试**
   - 查看订单统计
   - 测试催单功能
   - 查看订单详情
   - 管理订单状态

#### 5.2 SalesReconciliationPage (/sales-reconciliation)
**页面功能**:
- [ ] 页面正常加载
- [ ] 对账数据显示
- [ ] 数据筛选功能
- [ ] 数据导出功能
- [ ] 数据对比功能
- [ ] 异常数据标记
- [ ] 对账报告生成
- [ ] 时间范围选择
- [ ] 数据统计图表
- [ ] 差异分析功能

**详细测试步骤**:
1. **对账数据测试**
   - 查看对账数据
   - 测试数据筛选
   - 测试时间范围选择
   - 查看数据统计

2. **数据对比测试**
   - 对比不同时间数据
   - 标记异常数据
   - 生成对账报告
   - 分析数据差异

3. **数据导出测试**
   - 导出对账数据
   - 导出对账报告
   - 验证导出格式
   - 测试筛选导出

---

## 🔄 核心业务流程详细测试

### 流程1：一级销售完整流程
**目标**: 测试一级销售从注册到管理的完整流程

**详细测试步骤**:
1. **一级销售注册**
   - 访问 `/primary-sales` 页面
   - 填写一级销售信息（微信名、支付方式、支付地址）
   - 设置佣金比例（默认40%）
   - 提交注册表单
   - 验证双链接生成（注册链接+销售链接）
   - 验证数据保存到数据库

2. **创建二级销售**
   - 使用注册链接访问二级销售注册页面
   - 填写二级销售信息（微信名、支付方式、支付地址）
   - 提交注册表单
   - 验证销售链接生成
   - 验证与一级销售的关联关系
   - 验证数据保存到数据库

3. **用户下单**
   - 使用二级销售链接访问购买页面
   - 填写用户信息（TradingView用户名、微信信息）
   - 选择购买时长（7天免费/1个月/3个月/6个月/终身）
   - 验证价格计算正确
   - 选择支付方式（支付宝/线上地址码）
   - 上传支付截图
   - 提交订单
   - 验证订单创建成功

4. **数据回流验证**
   - 管理员登录后台
   - 查看订单数据是否正确回流
   - 验证佣金计算是否正确
   - 验证层级关系是否正确
   - 验证统计数据是否更新
   - 验证一级销售结算数据

**预期结果**:
- 一级销售注册成功，双链接生成正确
- 二级销售注册成功，与一级销售关联正确
- 用户订单创建成功，价格计算正确
- 数据正确回流到管理员系统
- 佣金计算正确，一级销售获得40%佣金，二级销售获得设定比例佣金

### 流程2：二级销售完整流程
**目标**: 测试二级销售从注册到管理的完整流程

**详细测试步骤**:
1. **二级销售注册**
   - 使用一级销售提供的注册链接
   - 填写二级销售信息
   - 提交注册表单
   - 验证销售链接生成
   - 验证与一级销售的关联关系

2. **用户下单**
   - 使用二级销售链接访问购买页面
   - 填写用户信息
   - 选择购买时长
   - 提交订单
   - 验证订单创建成功

3. **数据验证**
   - 管理员查看订单数据
   - 验证佣金分配（一级销售获得40%-二级销售佣金，二级销售获得设定佣金）
   - 验证层级关系
   - 验证统计数据更新

**预期结果**:
- 二级销售注册成功
- 用户订单创建成功
- 佣金正确分配给一级和二级销售
- 数据正确回流到管理员系统

### 流程3：用户购买流程
**目标**: 测试用户从访问链接到完成购买的完整流程

**详细测试步骤**:
1. **访问购买链接**
   - 使用有效的销售链接
   - 验证页面正常加载
   - 验证销售信息显示（销售微信名、支付方式、支付地址）
   - 验证链接有效性

2. **填写购买信息**
   - 填写TradingView用户名
   - 填写微信信息
   - 选择购买时长
   - 验证价格计算（7天免费/1个月99元/3个月199元/6个月299元/终身399元）
   - 验证表单验证

3. **选择支付方式**
   - 选择支付宝或线上地址码
   - 验证支付信息显示
   - 上传支付截图（支持JPG、PNG、GIF格式，最大5MB）
   - 验证文件格式和大小

4. **提交订单**
   - 提交订单表单
   - 验证订单创建成功
   - 验证订单状态更新
   - 验证数据保存到数据库
   - 验证佣金计算

**预期结果**:
- 页面正常加载，销售信息显示正确
- 价格计算正确
- 订单创建成功
- 数据正确保存
- 佣金计算正确

### 流程4：管理员数据管理流程
**目标**: 测试管理员从登录到数据管理的完整流程

**详细测试步骤**:
1. **管理员登录**
   - 访问管理员登录页面
   - 输入正确凭据（用户名：知行，密码：Zhixing Universal Trading Signal）
   - 验证登录成功
   - 验证跳转到管理员后台

2. **查看统计数据**
   - 访问概览页面
   - 查看销售统计（一级销售数、二级销售数、活跃层级关系数）
   - 查看订单统计（总订单数、总销售额、总佣金）
   - 查看佣金统计
   - 验证数据实时更新

3. **管理订单数据**
   - 访问订单页面
   - 查看订单列表
   - 更新订单状态
   - 导出订单数据
   - 测试订单筛选和搜索

4. **管理销售数据**
   - 访问销售页面
   - 查看销售列表
   - 查看层级关系
   - 导出销售数据
   - 测试销售类型筛选

**预期结果**:
- 登录成功，权限验证正确
- 统计数据准确，实时更新
- 数据管理功能正常
- 导出功能正常

---

## 🐛 Bug修复流程

### 修复流程步骤
1. **问题发现和记录**
   - 在错题本中记录问题
   - 分析问题根本原因
   - 确定修复优先级

2. **修复实施**
   - 制定修复方案
   - 实施修复代码
   - 本地测试验证

3. **修复验证**
   - 重新运行相关测试
   - 验证修复效果
   - 更新错题本状态

4. **部署前检查**
   - 确保所有问题已修复
   - 运行完整测试套件
   - 验证系统稳定性

### 修复优先级
- **高优先级**: 影响核心功能的严重bug
- **中优先级**: 影响用户体验的重要bug
- **低优先级**: 界面优化和性能改进

---

## 📊 测试结果记录

### 测试统计
- **总测试用例数**: [待统计]
- **通过用例数**: [待统计]
- **失败用例数**: [待统计]
- **成功率**: [待计算]

### 问题统计
- **严重问题数**: [待统计]
- **一般问题数**: [待统计]
- **轻微问题数**: [待统计]
- **已修复问题数**: [待统计]

### 性能指标
- **平均响应时间**: [待测试]
- **最大响应时间**: [待测试]
- **并发用户数**: [待测试]
- **系统稳定性**: [待测试]

---

## 🚀 部署前检查清单

### 代码质量检查
- [ ] 所有测试用例通过
- [ ] 代码审查完成
- [ ] 性能测试通过
- [ ] 安全测试通过

### 功能完整性检查
- [ ] 所有核心功能正常
- [ ] 所有业务流程完整
- [ ] 数据回流功能正常
- [ ] 错误处理机制完善

### 部署准备检查
- [ ] 环境配置正确
- [ ] 数据库备份完成
- [ ] 回滚方案准备
- [ ] 监控配置完成

### 错题本验证
- [ ] 所有问题已修复
- [ ] 所有修复已验证
- [ ] 无遗留问题
- [ ] 系统稳定性确认

---

## 📝 测试执行记录

### 测试执行时间表
- **开始时间**: [待填写]
- **预计完成时间**: [待填写]
- **实际完成时间**: [待填写]

### 测试人员
- **主要测试人员**: AI助手
- **协助测试人员**: 用户
- **审核人员**: 用户

### 测试环境
- **测试环境**: Vercel生产环境
- **数据库**: PlanetScale
- **浏览器**: Chrome, Firefox, Safari
- **设备**: 桌面端, 移动端

---

**最后更新**: 2025-08-01  
**更新人**: AI助手  
**状态**: 测试未进行