"use strict";(self.webpackChunkzhixing=self.webpackChunkzhixing||[]).push([[784],{784:(e,s,a)=>{a.r(s),a.d(s,{default:()=>k});var l=a(5043),r=a(5475),i=a(2261),n=a(5206),t=a(5397),d=a(8354),c=a(3427),o=a(5444),x=a(2019),h=a(6553),p=a(6051),g=a(1023),u=a(9025),m=a(3722),y=a(6250),j=a(6213),A=a(579);const{Title:v,Text:_}=g.A,{Option:b}=h.A,k=()=>{const[e]=(0,r.ok)(),[s]=c.A.useForm(),[a,g]=(0,l.useState)(!1),[k,f]=(0,l.useState)(null),[w,T]=(0,l.useState)(null),[C,I]=(0,l.useState)(""),[z,N]=(0,l.useState)(""),[S,q]=(0,l.useState)(null),[R,B]=(0,l.useState)(!1),[F,E]=(0,l.useState)("loading");(0,l.useEffect)(()=>{document.title="\u9500\u552e\u6ce8\u518c"},[]),(0,l.useEffect)(()=>{const s=e.get("sales_code");s?(B(!0),N(s),O(s)):(B(!1),E("valid"))},[e]);const O=async e=>{try{g(!0),E("loading");const s=await j.A.get(`/api/secondary-sales?path=validate&link_code=${e}&link_type=secondary_registration`);s.data.success?(q(s.data.data),E("valid")):(f("\u6ce8\u518c\u7801\u65e0\u6548\u6216\u5df2\u8fc7\u671f"),E("invalid"))}catch(k){console.error("\u9a8c\u8bc1\u6ce8\u518c\u7801\u5931\u8d25:",k),f("\u6ce8\u518c\u7801\u9a8c\u8bc1\u5931\u8d25"),E("invalid")}finally{g(!1)}};return R&&"invalid"===F?(0,A.jsx)("div",{className:"page-container",children:(0,A.jsx)("div",{className:"content-container",children:(0,A.jsxs)(t.A,{className:"card-container",role:"region",children:[(0,A.jsx)(v,{level:2,style:{textAlign:"center",marginBottom:32},children:"\u9500\u552e\u6ce8\u518c"}),(0,A.jsx)(i.A,{message:"\u6ce8\u518c\u7801\u65e0\u6548",description:"\u60a8\u63d0\u4f9b\u7684\u6ce8\u518c\u7801\u65e0\u6548\u6216\u5df2\u8fc7\u671f\uff0c\u8bf7\u8054\u7cfb\u4e00\u7ea7\u9500\u552e\u83b7\u53d6\u65b0\u7684\u6ce8\u518c\u7801\u3002",type:"error",showIcon:!0,style:{textAlign:"center"}})]})})}):R&&"loading"===F?(0,A.jsx)("div",{className:"page-container",children:(0,A.jsx)("div",{className:"content-container",children:(0,A.jsxs)(t.A,{className:"card-container",role:"region",children:[(0,A.jsx)(v,{level:2,style:{textAlign:"center",marginBottom:32},children:"\u9500\u552e\u6ce8\u518c"}),(0,A.jsx)("div",{style:{textAlign:"center",padding:"50px 0"},children:(0,A.jsx)("div",{children:"\u6b63\u5728\u9a8c\u8bc1\u6ce8\u518c\u7801..."})})]})})}):(0,A.jsx)("div",{className:"page-container",children:(0,A.jsx)("div",{className:"content-container",children:(0,A.jsxs)(t.A,{className:"card-container",role:"region",children:[(0,A.jsx)(v,{level:2,style:{textAlign:"center",marginBottom:32},children:"\u9500\u552e\u6ce8\u518c"}),(0,A.jsxs)(c.A,{form:s,layout:"vertical",onFinish:async e=>{try{let a;if(g(!0),f(null),a=R?await j.A.post("/api/secondary-sales?path=register",{...e,registration_code:z,primary_sales_id:null===S||void 0===S?void 0:S.primary_sales_id}):await j.A.post("/api/secondary-sales?path=register-independent",e),a.data.success){const e=a.data.data;T({user_sales_link:e.user_sales_link,user_sales_code:e.sales_code}),x.Ay.success("\u9500\u552e\u6536\u6b3e\u4fe1\u606f\u521b\u5efa\u6210\u529f\uff01"),s.resetFields()}else f(a.data.message||"\u521b\u5efa\u5931\u8d25")}catch(k){var a,l;console.error("\u521b\u5efa\u5931\u8d25:",k),f((null===(a=k.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.message)||"\u521b\u5efa\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")}finally{g(!1)}},className:"form-container",children:[(0,A.jsx)(c.A.Item,{name:"wechat_name",label:"\u5fae\u4fe1\u53f7",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5fae\u4fe1\u53f7"}],children:(0,A.jsx)(o.A,{prefix:(0,A.jsx)(m.A,{}),placeholder:"\u8bf7\u8f93\u5165\u5fae\u4fe1\u53f7",size:"large"})}),(0,A.jsx)(c.A.Item,{name:"payment_method",label:"\u6536\u6b3e\u65b9\u5f0f",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6536\u6b3e\u65b9\u5f0f"}],children:(0,A.jsxs)(h.A,{placeholder:"\u8bf7\u9009\u62e9\u6536\u6b3e\u65b9\u5f0f",size:"large",onChange:e=>I(e),"aria-label":"\u8bf7\u9009\u62e9\u6536\u6b3e\u65b9\u5f0f",children:[(0,A.jsx)(b,{value:"alipay",children:"\u652f\u4ed8\u5b9d"}),(0,A.jsx)(b,{value:"crypto",children:"\u7ebf\u4e0a\u5730\u5740\u7801"})]})}),"alipay"===C&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(c.A.Item,{name:"payment_address",label:"\u652f\u4ed8\u5b9d\u8d26\u53f7",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u652f\u4ed8\u5b9d\u8d26\u53f7"}],children:(0,A.jsx)(o.A,{prefix:(0,A.jsx)(y.A,{}),placeholder:"\u8bf7\u8f93\u5165\u652f\u4ed8\u5b9d\u8d26\u53f7",size:"large"})}),(0,A.jsx)(c.A.Item,{name:"alipay_surname",label:"\u6536\u6b3e\u4eba\u59d3\u6c0f",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6536\u6b3e\u4eba\u59d3\u6c0f"}],children:(0,A.jsx)(o.A,{placeholder:"\u8bf7\u8f93\u5165\u6536\u6b3e\u4eba\u59d3\u6c0f",size:"large","aria-label":"\u8bf7\u8f93\u5165\u6536\u6b3e\u4eba\u59d3\u6c0f"})})]}),"crypto"===C&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(c.A.Item,{name:"chain_name",label:"\u94fe\u540d",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u94fe\u540d"}],children:(0,A.jsx)(o.A,{placeholder:"\u4f8b\u5982\uff1aTRC10/TRC20",size:"large","aria-label":"\u4f8b\u5982\uff1aTRC10/TRC20"})}),(0,A.jsx)(c.A.Item,{name:"payment_address",label:"\u6536\u6b3e\u5730\u5740",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6536\u6b3e\u5730\u5740"}],children:(0,A.jsx)(o.A.TextArea,{placeholder:"\u8bf7\u8f93\u5165\u6536\u6b3e\u5730\u5740",rows:3,size:"large","aria-label":"\u8bf7\u8f93\u5165\u6536\u6b3e\u5730\u5740"})})]}),(0,A.jsx)(c.A.Item,{children:(0,A.jsx)(n.Ay,{type:"primary",htmlType:"submit",loading:a,size:"large",block:!0,tabIndex:0,children:"\u751f\u6210\u6536\u6b3e\u94fe\u63a5"})})]}),k&&(0,A.jsx)(i.A,{message:"\u9519\u8bef",description:k,type:"error",showIcon:!0,style:{marginTop:16}}),w&&(0,A.jsxs)("div",{style:{marginTop:32},children:[(0,A.jsx)(d.A,{children:"\u751f\u6210\u7684\u6536\u6b3e\u94fe\u63a5"}),(0,A.jsxs)(p.A,{direction:"vertical",style:{width:"100%"},size:"large",children:[(0,A.jsx)(t.A,{title:"\ud83d\udcb0 \u7528\u6237\u8d2d\u4e70\u94fe\u63a5",style:{backgroundColor:"#f6ffed",borderColor:"#b7eb8f"},role:"region",children:(0,A.jsxs)(p.A,{direction:"vertical",style:{width:"100%"},children:[(0,A.jsxs)("div",{children:[(0,A.jsx)(_,{strong:!0,children:"\u7528\u6237\u8d2d\u4e70\u94fe\u63a5\uff1a"}),(0,A.jsx)("div",{style:{wordBreak:"break-all",backgroundColor:"white",padding:"8px",borderRadius:"4px",marginTop:"4px",border:"1px solid #d9d9d9"},children:w.user_sales_link}),(0,A.jsx)(n.Ay,{type:"link",icon:(0,A.jsx)(u.A,{}),onClick:async()=>{if(null!==w&&void 0!==w&&w.user_sales_link)try{await navigator.clipboard.writeText(w.user_sales_link),x.Ay.success("\u7528\u6237\u8d2d\u4e70\u94fe\u63a5\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f")}catch(e){x.Ay.error("\u590d\u5236\u5931\u8d25")}},style:{padding:0,marginTop:"4px"},tabIndex:0,children:"\u590d\u5236\u7528\u6237\u8d2d\u4e70\u94fe\u63a5"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)(_,{strong:!0,children:"\u7528\u6237\u8d2d\u4e70\u4ee3\u7801\uff1a"}),(0,A.jsx)("div",{style:{wordBreak:"break-all",backgroundColor:"white",padding:"8px",borderRadius:"4px",marginTop:"4px",border:"1px solid #d9d9d9"},children:w.user_sales_code}),(0,A.jsx)(n.Ay,{type:"link",icon:(0,A.jsx)(u.A,{}),onClick:async()=>{if(null!==w&&void 0!==w&&w.user_sales_code)try{await navigator.clipboard.writeText(w.user_sales_code),x.Ay.success("\u7528\u6237\u8d2d\u4e70\u4ee3\u7801\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f")}catch(e){x.Ay.error("\u590d\u5236\u5931\u8d25")}},style:{padding:0,marginTop:"4px"},tabIndex:0,children:"\u590d\u5236\u7528\u6237\u8d2d\u4e70\u4ee3\u7801"})]})]})}),(0,A.jsx)(n.Ay,{type:"default",onClick:()=>{T(null),f(null)},style:{marginTop:"8px"},tabIndex:0,children:"\u751f\u6210\u65b0\u94fe\u63a5"})]})]})]})})})}}}]);
//# sourceMappingURL=784.ebbbdae4.chunk.js.map