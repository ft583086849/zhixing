"use strict";(self.webpackChunkzhixing=self.webpackChunkzhixing||[]).push([[157],{157:(e,t,n)=>{n.r(t),n.d(t,{default:()=>E});var o=n(5043),r=n(2261),i=n(5206),a=n(5397),s=n(1645),l=n(7734),c=n(3427),d=n(5444),m=n(2019),p=n(7419),u=n(6051),g=n(6612),x=n(1381),h=n(6399),y=n(1023),f=n(6401),A=n(9470),v=n(2058),j=n(3761),w=n(3722),b=n(446),$=n.n(b),I=n(5158),S=n(579);const{Title:C,Text:k}=y.A,E=()=>{const[e]=c.A.useForm(),[t,n]=(0,o.useState)(!1),[y,b]=(0,o.useState)(null),[E,_]=(0,o.useState)([]),[z,M]=(0,o.useState)([]),[O,B]=(0,o.useState)({totalOrders:0,totalAmount:0,totalCommission:0,pendingReminderCount:0}),D=[{title:"\u8ba2\u5355ID",dataIndex:"id",key:"id",width:80},{title:"\u7528\u6237\u5fae\u4fe1\u53f7",dataIndex:"customer_wechat",key:"customer_wechat",width:120},{title:"TradingView\u7528\u6237",dataIndex:"tradingview_username",key:"tradingview_username",width:150},{title:"\u8d2d\u4e70\u65f6\u957f",dataIndex:"duration",key:"duration",width:100,render:e=>({"7days":"7\u5929\u514d\u8d39","1month":"1\u4e2a\u6708","3months":"3\u4e2a\u6708","6months":"6\u4e2a\u6708",lifetime:"\u7ec8\u8eab"}[e]||e)},{title:"\u8ba2\u5355\u91d1\u989d",dataIndex:"amount",key:"amount",width:100,render:e=>`$${e.toFixed(2)}`},{title:"\u8fd4\u4f63\u91d1\u989d",dataIndex:"commission_amount",key:"commission_amount",width:100,render:e=>`$${e.toFixed(2)}`},{title:"\u4ed8\u6b3e\u65f6\u95f4",dataIndex:"payment_time",key:"payment_time",width:150,render:e=>$()(e).format("YYYY-MM-DD HH:mm")},{title:"\u5230\u671f\u65f6\u95f4",dataIndex:"expiry_time",key:"expiry_time",width:150,render:e=>$()(e).format("YYYY-MM-DD HH:mm")},{title:"\u72b6\u6001",dataIndex:"status",key:"status",width:100,render:e=>{const t={pending_payment:{text:"\u5f85\u4ed8\u6b3e\u786e\u8ba4",color:"processing"},pending_config:{text:"\u5f85\u914d\u7f6e\u786e\u8ba4",color:"warning"},confirmed_payment:{text:"\u5df2\u4ed8\u6b3e\u786e\u8ba4",color:"success"},confirmed_configuration:{text:"\u5df2\u914d\u7f6e\u786e\u8ba4",color:"success"},rejected:{text:"\u5df2\u62d2\u7edd",color:"error"}}[e]||{text:e,color:"default"};return(0,S.jsx)(h.A,{color:t.color,children:t.text})}}],Y=[...D,{title:"\u5269\u4f59\u5929\u6570",dataIndex:"daysUntilExpiry",key:"daysUntilExpiry",width:100,render:e=>e<=0?(0,S.jsx)(h.A,{color:"error",children:"\u5df2\u8fc7\u671f"}):e<=3?(0,S.jsxs)(h.A,{color:"warning",children:[e,"\u5929"]}):(0,S.jsxs)(h.A,{color:"processing",children:[e,"\u5929"]})},{title:"\u64cd\u4f5c",key:"action",width:100,render:(e,t)=>(0,S.jsx)(i.Ay,{type:"link",size:"small",icon:(0,S.jsx)(A.A,{}),tabIndex:0,onClick:()=>m.Ay.success(`\u5df2\u540c${t.customer_wechat}\u7528\u6237\u5b8c\u6210\u50ac\u5355`),children:"\u50ac\u5355"})}];return(0,S.jsx)("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",minHeight:"100vh"},children:(0,S.jsxs)("div",{style:{background:"white",borderRadius:"16px",padding:"32px",boxShadow:"0 20px 40px rgba(0,0,0,0.1)",marginTop:"20px"},children:[(0,S.jsx)(C,{level:2,style:{textAlign:"center",marginBottom:"32px",color:"#2c3e50"},children:"\u9500\u552e\u5bf9\u8d26\u9875\u9762"}),(0,S.jsx)(a.A,{title:"\u67e5\u8be2\u9500\u552e\u4fe1\u606f",style:{marginBottom:24},role:"region",children:(0,S.jsxs)(c.A,{form:e,layout:"inline",onFinish:async e=>{if(e.wechat_name||e.payment_date_range){n(!0);try{const t={};if(e.wechat_name&&(t.wechat_name=e.wechat_name),e.payment_date_range&&2===e.payment_date_range.length){const[n,o]=e.payment_date_range;t.payment_date_range=`${n.format("YYYY-MM-DD")},${o.format("YYYY-MM-DD")}`}const n=await I.PD.getSecondarySalesSettlement(t);if(n.data.success){const{sales:e,orders:t,reminderOrders:o,stats:r}=n.data.data;b(e),_(t),M(o),B(r),m.Ay.success("\u5bf9\u8d26\u4fe1\u606f\u67e5\u8be2\u6210\u529f")}else m.Ay.error(n.data.message||"\u67e5\u8be2\u5931\u8d25")}catch(r){var t,o;console.error("\u67e5\u8be2\u5931\u8d25:",r);const e=(null===(t=r.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.message)||r.message||"\u67e5\u8be2\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5";m.Ay.error(e)}finally{n(!1)}}else m.Ay.error("\u8bf7\u8f93\u5165\u5fae\u4fe1\u53f7\u6216\u9009\u62e9\u4ed8\u6b3e\u65f6\u95f4")},children:[(0,S.jsx)(c.A.Item,{name:"wechat_name",label:"\u5fae\u4fe1\u53f7",children:(0,S.jsx)(d.A,{placeholder:"\u8bf7\u8f93\u5165\u5fae\u4fe1\u53f7",style:{width:200},allowClear:!0,"aria-label":"\u8bf7\u8f93\u5165\u5fae\u4fe1\u53f7"})}),(0,S.jsx)(c.A.Item,{children:(0,S.jsxs)(u.A,{children:[(0,S.jsx)(i.Ay,{type:"primary",htmlType:"submit",loading:t,icon:(0,S.jsx)(v.A,{}),tabIndex:0,children:"\u67e5\u8be2"}),(0,S.jsx)(i.Ay,{onClick:()=>{e.resetFields(),b(null),_([]),M([]),B({totalOrders:0,totalAmount:0,totalCommission:0,pendingReminderCount:0})},tabIndex:0,children:"\u91cd\u7f6e"})]})})]})}),y&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(a.A,{title:"\u8ba2\u5355\u7edf\u8ba1\u4fe1\u606f",style:{marginBottom:24},role:"region",children:(0,S.jsxs)(p.A,{gutter:16,children:[(0,S.jsx)(s.A,{span:6,children:(0,S.jsx)(g.A,{title:"\u603b\u8ba2\u5355\u6570",value:O.totalOrders,prefix:(0,S.jsx)(j.A,{})})}),(0,S.jsx)(s.A,{span:6,children:(0,S.jsx)(g.A,{title:"\u603b\u8ba2\u5355\u91d1\u989d",value:O.totalAmount,prefix:(0,S.jsx)(f.A,{}),suffix:"\u7f8e\u5143"})}),(0,S.jsx)(s.A,{span:6,children:(0,S.jsx)(g.A,{title:"\u8fd4\u4f63\u91d1\u989d",value:O.totalCommission,prefix:(0,S.jsx)(f.A,{}),suffix:"\u7f8e\u5143",precision:2,valueStyle:{color:"#3f8600"}})}),(0,S.jsx)(s.A,{span:6,children:(0,S.jsx)(g.A,{title:"\u8fd4\u4f63\u6bd4\u4f8b",value:100*y.commission_rate,suffix:"%",precision:0})})]})}),(0,S.jsx)(a.A,{title:(0,S.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,S.jsx)("span",{children:"\u8ba2\u5355\u5217\u8868"}),(0,S.jsxs)("div",{style:{marginLeft:"auto"},children:[(0,S.jsx)("span",{style:{marginRight:8,fontSize:"14px",color:"#666"},children:"\u4ed8\u6b3e\u65f6\u95f4:"}),(0,S.jsx)(l.A.RangePicker,{style:{width:240},placeholder:["\u5f00\u59cb\u65f6\u95f4","\u7ed3\u675f\u65f6\u95f4"],format:"YYYY-MM-DD","aria-label":"\u9009\u62e9\u4ed8\u6b3e\u65f6\u95f4\u8303\u56f4",onChange:e=>{console.log("\u4ed8\u6b3e\u65f6\u95f4\u8303\u56f4:",e)}})]})]}),style:{marginBottom:24},role:"region",children:(0,S.jsx)(x.A,{columns:D,dataSource:E,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,t)=>`\u7b2c ${t[0]}-${t[1]} \u6761\uff0c\u5171 ${e} \u6761`},scroll:{x:1e3}})}),O.pendingReminderCount>0&&(0,S.jsxs)(a.A,{title:"\u5f85\u50ac\u5355\u5ba2\u6237\u7edf\u8ba1",style:{marginBottom:24},role:"region",children:[(0,S.jsx)(r.A,{message:`\u6709 ${O.pendingReminderCount} \u4e2a\u5ba2\u6237\u9700\u8981\u50ac\u5355`,description:"\u4ee5\u4e0b\u5ba2\u6237\u7684\u670d\u52a1\u5373\u5c06\u5230\u671f\u6216\u5df2\u8fc7\u671f\uff0c\u5efa\u8bae\u53ca\u65f6\u8054\u7cfb",type:"warning",showIcon:!0,style:{marginBottom:16}}),(0,S.jsx)(g.A,{title:"\u5f85\u50ac\u5355\u5ba2\u6237\u6570",value:O.pendingReminderCount,prefix:(0,S.jsx)(A.A,{}),valueStyle:{color:"#faad14"}})]}),O.pendingReminderCount>0&&(0,S.jsx)(a.A,{title:"\u5f85\u50ac\u5355\u5ba2\u6237\u8ba2\u5355\u5217\u8868",role:"region",children:(0,S.jsx)(x.A,{columns:Y,dataSource:z,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:(e,t)=>`\u7b2c ${t[0]}-${t[1]} \u6761\uff0c\u5171 ${e} \u6761`},scroll:{x:1100}})})]}),!y&&(0,S.jsx)(a.A,{role:"region",children:(0,S.jsxs)("div",{style:{textAlign:"center",padding:"40px 0"},children:[(0,S.jsx)(w.A,{style:{fontSize:"48px",color:"#d9d9d9",marginBottom:"16px"}}),(0,S.jsx)(k,{type:"secondary",style:{fontSize:"16px"},children:"\u8bf7\u8f93\u5165\u5fae\u4fe1\u53f7\u67e5\u8be2\u9500\u552e\u4fe1\u606f"})]})})]})})}},2261:(e,t,n)=>{n.d(t,{A:()=>N});var o=n(5043),r=n(2499),i=n(8528),a=n(3727),s=n(1376),l=n(3888),c=n(8139),d=n.n(c),m=n(541),p=n(8060),u=n(3758),g=n(2701),x=n(5296),h=n(3944),y=n(4414),f=n(8855);const A=(e,t,n,o,r)=>({background:e,border:`${(0,h.zA)(o.lineWidth)} ${o.lineType} ${t}`,[`${r}-icon`]:{color:n}}),v=e=>{const{componentCls:t,motionDurationSlow:n,marginXS:o,marginSM:r,fontSize:i,fontSizeLG:a,lineHeight:s,borderRadiusLG:l,motionEaseInOutCirc:c,withDescriptionIconSize:d,colorText:m,colorTextHeading:p,withDescriptionPadding:u,defaultPadding:g}=e;return{[t]:Object.assign(Object.assign({},(0,y.dF)(e)),{position:"relative",display:"flex",alignItems:"center",padding:g,wordWrap:"break-word",borderRadius:l,[`&${t}-rtl`]:{direction:"rtl"},[`${t}-content`]:{flex:1,minWidth:0},[`${t}-icon`]:{marginInlineEnd:o,lineHeight:0},"&-description":{display:"none",fontSize:i,lineHeight:s},"&-message":{color:p},[`&${t}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${n} ${c}, opacity ${n} ${c},\n        padding-top ${n} ${c}, padding-bottom ${n} ${c},\n        margin-bottom ${n} ${c}`},[`&${t}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${t}-with-description`]:{alignItems:"flex-start",padding:u,[`${t}-icon`]:{marginInlineEnd:r,fontSize:d,lineHeight:0},[`${t}-message`]:{display:"block",marginBottom:o,color:p,fontSize:a},[`${t}-description`]:{display:"block",color:m}},[`${t}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},j=e=>{const{componentCls:t,colorSuccess:n,colorSuccessBorder:o,colorSuccessBg:r,colorWarning:i,colorWarningBorder:a,colorWarningBg:s,colorError:l,colorErrorBorder:c,colorErrorBg:d,colorInfo:m,colorInfoBorder:p,colorInfoBg:u}=e;return{[t]:{"&-success":A(r,o,n,e,t),"&-info":A(u,p,m,e,t),"&-warning":A(s,a,i,e,t),"&-error":Object.assign(Object.assign({},A(d,c,l,e,t)),{[`${t}-description > pre`]:{margin:0,padding:0}})}}},w=e=>{const{componentCls:t,iconCls:n,motionDurationMid:o,marginXS:r,fontSizeIcon:i,colorIcon:a,colorIconHover:s}=e;return{[t]:{"&-action":{marginInlineStart:r},[`${t}-close-icon`]:{marginInlineStart:r,padding:0,overflow:"hidden",fontSize:i,lineHeight:(0,h.zA)(i),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${n}-close`]:{color:a,transition:`color ${o}`,"&:hover":{color:s}}},"&-close-text":{color:a,transition:`color ${o}`,"&:hover":{color:s}}}}},b=(0,f.OF)("Alert",e=>[v(e),j(e),w(e)],e=>({withDescriptionIconSize:e.fontSizeHeading3,defaultPadding:`${e.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`}));var $=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};const I={success:r.A,info:l.A,error:i.A,warning:s.A},S=e=>{const{icon:t,prefixCls:n,type:r}=e,i=I[r]||null;return t?(0,g.fx)(t,o.createElement("span",{className:`${n}-icon`},t),()=>({className:d()(`${n}-icon`,t.props.className)})):o.createElement(i,{className:`${n}-icon`})},C=e=>{const{isClosable:t,prefixCls:n,closeIcon:r,handleClose:i,ariaProps:s}=e,l=!0===r||void 0===r?o.createElement(a.A,null):r;return t?o.createElement("button",Object.assign({type:"button",onClick:i,className:`${n}-close-icon`,tabIndex:0},s),l):null},k=o.forwardRef((e,t)=>{const{description:n,prefixCls:r,message:i,banner:a,className:s,rootClassName:l,style:c,onMouseEnter:g,onMouseLeave:h,onClick:y,afterClose:f,showIcon:A,closable:v,closeText:j,closeIcon:w,action:I,id:k}=e,E=$(e,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[_,z]=o.useState(!1);const M=o.useRef(null);o.useImperativeHandle(t,()=>({nativeElement:M.current}));const{getPrefixCls:O,direction:B,closable:D,closeIcon:Y,className:H,style:N}=(0,x.TP)("alert"),R=O("alert",r),[T,P,L]=b(R),F=t=>{var n;z(!0),null===(n=e.onClose)||void 0===n||n.call(e,t)},W=o.useMemo(()=>void 0!==e.type?e.type:a?"warning":"info",[e.type,a]),G=o.useMemo(()=>!("object"!==typeof v||!v.closeIcon)||(!!j||("boolean"===typeof v?v:!1!==w&&null!==w&&void 0!==w||!!D)),[j,w,v,D]),K=!(!a||void 0!==A)||A,V=d()(R,`${R}-${W}`,{[`${R}-with-description`]:!!n,[`${R}-no-icon`]:!K,[`${R}-banner`]:!!a,[`${R}-rtl`]:"rtl"===B},H,s,l,L,P),X=(0,p.A)(E,{aria:!0,data:!0}),J=o.useMemo(()=>"object"===typeof v&&v.closeIcon?v.closeIcon:j||(void 0!==w?w:"object"===typeof D&&D.closeIcon?D.closeIcon:Y),[w,v,j,Y]),Q=o.useMemo(()=>{const e=null!==v&&void 0!==v?v:D;if("object"===typeof e){const{closeIcon:t}=e;return $(e,["closeIcon"])}return{}},[v,D]);return T(o.createElement(m.Ay,{visible:!_,motionName:`${R}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:e=>({maxHeight:e.offsetHeight}),onLeaveEnd:f},(t,r)=>{let{className:a,style:s}=t;return o.createElement("div",Object.assign({id:k,ref:(0,u.K4)(M,r),"data-show":!_,className:d()(V,a),style:Object.assign(Object.assign(Object.assign({},N),c),s),onMouseEnter:g,onMouseLeave:h,onClick:y,role:"alert"},X),K?o.createElement(S,{description:n,icon:e.icon,prefixCls:R,type:W}):null,o.createElement("div",{className:`${R}-content`},i?o.createElement("div",{className:`${R}-message`},i):null,n?o.createElement("div",{className:`${R}-description`},n):null),I?o.createElement("div",{className:`${R}-action`},I):null,o.createElement(C,{isClosable:G,prefixCls:R,closeIcon:J,handleClose:F,ariaProps:Q}))}))});const E=k;var _=n(3029),z=n(2901),M=n(3954),O=n(2176),B=n(6822);var D=n(5501);const Y=function(e){function t(){var e,n,o,r;return(0,_.A)(this,t),n=this,o=t,r=arguments,o=(0,M.A)(o),(e=(0,B.A)(n,(0,O.A)()?Reflect.construct(o,r||[],(0,M.A)(n).constructor):o.apply(n,r))).state={error:void 0,info:{componentStack:""}},e}return(0,D.A)(t,e),(0,z.A)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,info:t})}},{key:"render",value:function(){const{message:e,description:t,id:n,children:r}=this.props,{error:i,info:a}=this.state,s=(null===a||void 0===a?void 0:a.componentStack)||null,l="undefined"===typeof e?(i||"").toString():e,c="undefined"===typeof t?s:t;return i?o.createElement(E,{id:n,type:"error",message:l,description:o.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},c)}):r}}])}(o.Component),H=E;H.ErrorBoundary=Y;const N=H},9470:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(8168),r=n(5043);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"};var a=n(2172),s=function(e,t){return r.createElement(a.A,(0,o.A)({},e,{ref:t,icon:i}))};const l=r.forwardRef(s)}}]);
//# sourceMappingURL=157.5b4fabd9.chunk.js.map