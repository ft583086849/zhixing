"use strict";(self.webpackChunkzhixing=self.webpackChunkzhixing||[]).push([[563],{9563:(e,r,i)=>{i.r(r),i.d(r,{default:()=>O});var a=i(5043),t=i(9456),s=i(3216),l=i(5475),n=i(1023),d=i(6553),o=i(3427),c=i(2019),h=i(5397),u=i(6051),y=i(5008),x=i(5444),m=i(2261),p=i(6603),g=i(7419),j=i(1645),v=i(7734),A=i(7284),f=i(5206),b=i(6612),w=i(6909),_=i(3722),Y=i(4733),C=i(119),I=i(6401),S=i(446),T=i.n(S),z=i(8608),k=i(6525),q=i(6732),D=(i(8970),i(579));const{Title:B,Text:M}=n.A;var H=i(9144);const{Title:R,Text:F}=n.A,{Option:G}=d.A,O=()=>{var e;const{linkCode:r}=(0,s.g)(),[i]=(0,l.ok)(),n=(0,t.wA)(),d=i.get("sales_code")||r,{currentSales:S,loading:B,error:M}=(0,t.d4)(e=>e.sales),{loading:G,error:O,createdOrder:L}=(0,t.d4)(e=>e.orders),{config:P,loading:W,error:N}=(0,t.d4)(e=>e.paymentConfig),[U]=o.A.useForm(),[V,$]=(0,a.useState)(""),[E,J]=(0,a.useState)(""),[K,X]=(0,a.useState)("immediate"),[Q,Z]=(0,a.useState)(null),[ee,re]=(0,a.useState)([]),[ie,ae]=(0,a.useState)(!1),[te,se]=(0,a.useState)(""),[le,ne]=(0,a.useState)(""),[de,oe]=(0,a.useState)(""),ce=[{value:"7days",label:"7\u5929\u514d\u8d39",price:0},{value:"1month",label:"1\u4e2a\u6708",price:188},{value:"3months",label:"3\u4e2a\u6708",price:488},{value:"6months",label:"6\u4e2a\u6708",price:688},{value:"1year",label:"1\u5e74",price:1588}];(0,a.useEffect)(()=>(d&&(n((0,z.K)(d)),n((0,q.jp)())),()=>{n((0,z.nX)())}),[n,d]);const he=()=>{const e=ce.find(e=>e.value===V);return e?e.price:0},ue=()=>{if(!V)return null;let e;if("immediate"===K)e=T()();else{if("advance"!==K||!Q)return null;e=Q}switch(V){case"7days":return e.add(7,"day").add(1,"day");case"1month":return e.add(1,"month").add(1,"day");case"3months":return e.add(3,"month").add(1,"day");case"6months":return e.add(6,"month").add(1,"day");case"1year":return e.add(1,"year").add(1,"day");case"lifetime":return e.add(100,"year").add(1,"day");default:return null}},ye={fileList:ee,beforeUpload:e=>{if(!e.type.startsWith("image/"))return c.Ay.error("\u53ea\u80fd\u4e0a\u4f20\u56fe\u7247\u6587\u4ef6\uff01"),!1;return e.size/1024/1024<10?(re([e]),!1):(c.Ay.error("\u56fe\u7247\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc710MB\uff01"),!1)},onRemove:()=>{re([])},onPreview:e=>{se(e.url||URL.createObjectURL(e.originFileObj)),ae(!0)}};return B||W?(0,D.jsx)(H.A,{}):M||!S||N||!P?(0,D.jsx)("div",{className:"page-container",role:"main",children:(0,D.jsx)("div",{className:"content-container",role:"main",children:(0,D.jsx)(h.A,{className:"card-container",role:"region",children:(0,D.jsx)(m.A,{message:"\u4e0b\u5355\u62e5\u6324\uff0c\u8bf7\u7b49\u5f85",description:M||"\u7cfb\u7edf\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",type:"warning",showIcon:!0})})})}):(0,D.jsx)("div",{style:{padding:"24px",maxWidth:"900px",margin:"0 auto",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",minHeight:"100vh"},children:(0,D.jsxs)("div",{style:{background:"white",borderRadius:"16px",padding:"32px",boxShadow:"0 20px 40px rgba(0,0,0,0.1)",marginTop:"20px"},children:[(0,D.jsx)(R,{level:2,style:{textAlign:"center",marginBottom:"32px",color:"#2c3e50",fontWeight:"bold"},children:"\ud83d\ude80 \u8d2d\u4e70\u670d\u52a1"}),(0,D.jsx)(h.A,{title:"\u8d2d\u4e70\u4fe1\u606f",style:{marginBottom:16},role:"region",children:(0,D.jsxs)(o.A,{form:U,layout:"vertical",onFinish:async e=>{try{if(!V)return void c.Ay.error("\u8bf7\u9009\u62e9\u8d2d\u4e70\u65f6\u957f");if(!E)return void c.Ay.error("\u8bf7\u9009\u62e9\u4ed8\u6b3e\u65b9\u5f0f");if("advance"===K&&!Q)return void c.Ay.error("\u8bf7\u9009\u62e9\u751f\u6548\u65f6\u95f4");if("7days"!==V){if("alipay"===E&&!le)return void c.Ay.error("\u8bf7\u8f93\u5165\u652f\u4ed8\u5b9d\u4ed8\u6b3e\u91d1\u989d");if("crypto"===E&&!de)return void c.Ay.error("\u8bf7\u8f93\u5165\u7ebf\u4e0a\u5730\u5740\u7801\u4ed8\u6b3e\u91d1\u989d");if(0===ee.length)return void c.Ay.error("\u8bf7\u4e0a\u4f20\u4ed8\u6b3e\u622a\u56fe")}let i=null;ee.length>0&&(i=await(r=ee[0],new Promise(e=>{const i=new FileReader;i.onload=()=>e(i.result),i.readAsDataURL(r)})));const a={sales_code:d,link_code:d,tradingview_username:e.tradingview_username,customer_wechat:e.customer_wechat,duration:V,amount:he(),payment_method:E,payment_time:"7days"===V?T()().format("YYYY-MM-DD HH:mm:ss"):e.payment_time.format("YYYY-MM-DD HH:mm:ss"),purchase_type:K,effective_time:"advance"===K&&Q?Q.format("YYYY-MM-DD HH:mm:ss"):null,screenshot_data:i,alipay_amount:"alipay"===E?le:null,crypto_amount:"crypto"===E?de:null};await n((0,k.fS)(a)).unwrap(),c.Ay.success("\u8ba2\u5355\u63d0\u4ea4\u6210\u529f\uff01"),U.resetFields(),re([]),ne(""),oe(""),X("immediate"),Z(null)}catch(i){console.error("\u8ba2\u5355\u63d0\u4ea4\u5931\u8d25:",i);const e=["\u60a8\u7684tradingview\u5df2\u901a\u8fc7\u5176\u4ed6\u9500\u552e\u7ed1\u5b9a\uff0c\u4e0d\u652f\u6301\u8de8\u9500\u552e\u7ed1\u5b9a","\u60a8\u7684tradingview\u5df2\u901a\u8fc7\u9500\u552e\u7ed1\u5b9a\uff0c\u4e0d\u652f\u6301\u4e8c\u6b21\u9500\u552e\u7ed1\u5b9a","\u60a8\u5df2\u4eab\u53d7\u8fc7\u514d\u8d39\u671f\uff0c\u8bf7\u7eed\u8d39\u4f7f\u7528"],r=i.message||"\u4e0b\u5355\u62e5\u6324\uff0c\u8bf7\u7b49\u5f85",a=e.some(e=>r.includes(e))?r:"\u4e0b\u5355\u62e5\u6324\uff0c\u8bf7\u7b49\u5f85";c.Ay.error(a)}var r},children:[(0,D.jsx)(o.A.Item,{name:"tradingview_username",label:"TradingView\u7528\u6237\u540d",rules:[{required:!0,message:"\u8bf7\u8f93\u5165TradingView\u7528\u6237\u540d"}],children:(0,D.jsx)(x.A,{prefix:(0,D.jsx)(_.A,{}),placeholder:"\u8bf7\u8f93\u5165TradingView\u7528\u6237\u540d",size:"large"})}),(0,D.jsx)(o.A.Item,{name:"customer_wechat",label:"\u7528\u6237\u5fae\u4fe1\u53f7",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u5fae\u4fe1\u53f7"}],children:(0,D.jsx)(x.A,{prefix:(0,D.jsx)(_.A,{}),placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u5fae\u4fe1\u53f7",size:"large"})}),(0,D.jsx)(o.A.Item,{label:"\u8d2d\u4e70\u65f6\u957f",required:!0,children:(0,D.jsx)(p.Ay.Group,{value:V,onChange:e=>$(e.target.value),style:{width:"100%"},children:(0,D.jsx)(g.A,{gutter:[16,16],children:ce.map(e=>(0,D.jsx)(j.A,{span:24,sm:12,md:8,children:(0,D.jsx)(p.Ay.Button,{value:e.value,disabled:e.disabled,style:{width:"100%",textAlign:"center",height:"auto",padding:"12px",opacity:e.disabled?.5:1},children:(0,D.jsxs)("div",{children:[(0,D.jsx)("div",{children:e.label}),(0,D.jsx)("div",{style:{fontSize:"12px",color:"#666"},children:0===e.price?"\u514d\u8d39":`$${e.price}`}),e.disabled&&(0,D.jsx)("div",{style:{fontSize:"10px",color:"#ff4d4f"},children:"\u5df2\u552e\u7f44"})]})})},e.value))})})}),(0,D.jsxs)(o.A.Item,{label:"\u8d2d\u4e70\u65b9\u5f0f",required:!0,children:[(0,D.jsxs)(p.Ay.Group,{value:K,onChange:e=>{X(e.target.value),"immediate"===e.target.value&&Z(null)},children:[(0,D.jsx)(p.Ay.Button,{value:"immediate",children:"\u5373\u65f6\u8d2d\u4e70"}),(0,D.jsx)(p.Ay.Button,{value:"advance",children:"\u63d0\u524d\u8d2d\u4e70"})]}),(0,D.jsx)(F,{type:"secondary",style:{fontSize:"12px",marginLeft:"8px"},children:"immediate"===K?"\u8d2d\u4e70\u65e5\u914d\u7f6e\u540e\u5373\u751f\u6548":"\u8bf7\u6307\u5b9a\u751f\u6548\u65e5"})]}),"advance"===K&&(0,D.jsx)(o.A.Item,{label:"\u751f\u6548\u65f6\u95f4",required:!0,children:(0,D.jsx)(v.A,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss",placeholder:"\u8bf7\u9009\u62e9\u751f\u6548\u65f6\u95f4",size:"large",style:{width:"100%"},value:Q,onChange:e=>Z(e),disabledDate:e=>e&&e<T()().startOf("day")})}),(0,D.jsxs)(o.A.Item,{label:"\u4ed8\u6b3e\u65b9\u5f0f",required:!0,children:[(0,D.jsxs)(p.Ay.Group,{value:E,onChange:e=>J(e.target.value),children:[(0,D.jsx)(p.Ay.Button,{value:"alipay",children:"\u652f\u4ed8\u5b9d"}),(0,D.jsx)(p.Ay.Button,{value:"crypto",children:"\u7ebf\u4e0a\u5730\u5740\u7801"})]}),"alipay"===E&&V&&"7days"!==V&&(0,D.jsx)("div",{style:{marginTop:8},children:(0,D.jsxs)(F,{type:"secondary",style:{fontSize:"12px"},children:["\u9ed8\u8ba4\u6c47\u7387\u6309\u71677.15\u8ba1\u7b97\uff0c\u5efa\u8bae\u4ed8\u6b3e\u91d1\u989d\uff1a\xa5",(7.15*he()).toFixed(2)]})})]}),S&&E&&P&&"7days"!==V?"alipay"===E?(0,D.jsx)(h.A,{title:"\u652f\u4ed8\u5b9d\u6536\u6b3e\u4fe1\u606f",style:{marginBottom:16},role:"region",children:(0,D.jsxs)(u.A,{direction:"vertical",style:{width:"100%"},children:[(0,D.jsxs)("div",{children:[(0,D.jsx)(F,{strong:!0,children:"\u652f\u4ed8\u5b9d\u8d26\u53f7\uff1a"}),(0,D.jsx)(F,{copyable:!0,children:P.alipay_account})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)(F,{strong:!0,children:"\u6536\u6b3e\u4eba\u59d3\u6c0f\uff1a"}),(0,D.jsx)(F,{children:P.alipay_surname})]}),(0,D.jsxs)("div",{style:{textAlign:"center",marginTop:16},children:[(0,D.jsx)(F,{strong:!0,style:{display:"block",marginBottom:8},children:"\u652f\u4ed8\u5b9d\u6536\u6b3e\u7801"}),P.alipay_qr_code?(0,D.jsx)(y.A,{width:200,height:200,src:P.alipay_qr_code,style:{objectFit:"cover",borderRadius:8},preview:{src:P.alipay_qr_code}}):(0,D.jsx)("div",{style:{width:200,height:200,border:"2px dashed #d9d9d9",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fafafa"},children:(0,D.jsx)(F,{type:"secondary",children:"\u6682\u65e0\u6536\u6b3e\u7801\u56fe\u7247"})})]}),(0,D.jsx)(o.A.Item,{label:"\u4ed8\u6b3e\u91d1\u989d\uff08\u4eba\u6c11\u5e01\uff09",required:!0,children:(0,D.jsx)(x.A,{type:"number",placeholder:"\u8bf7\u8f93\u5165\u4ed8\u6b3e\u91d1\u989d",value:le,onChange:e=>ne(e.target.value),"aria-label":"\u8bf7\u8f93\u5165\u4ed8\u6b3e\u91d1\u989d",addonAfter:"\u5143",size:"large"})})]})}):"crypto"===E?(0,D.jsxs)("div",{style:{marginBottom:16},children:[(0,D.jsx)(h.A,{title:"\u94fe\u4e0a\u6536\u6b3e\u4fe1\u606f",size:"small",role:"region",children:(0,D.jsxs)(u.A,{direction:"vertical",style:{width:"100%"},children:[(0,D.jsxs)("div",{children:[(0,D.jsx)(F,{strong:!0,children:"\u94fe\u540d\uff1a"}),(0,D.jsx)(F,{children:P.crypto_chain_name})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)(F,{strong:!0,children:"\u5730\u5740\uff1a"}),(0,D.jsx)(F,{copyable:!0,children:P.crypto_address})]}),P.crypto_qr_code?(0,D.jsxs)("div",{style:{textAlign:"center",marginTop:16},children:[(0,D.jsx)(F,{strong:!0,style:{display:"block",marginBottom:8},children:"\u6536\u6b3e\u7801\u56fe\u7247"}),(0,D.jsx)(y.A,{width:200,height:200,src:P.crypto_qr_code,style:{objectFit:"cover",borderRadius:8},preview:{src:P.crypto_qr_code}})]}):(0,D.jsxs)("div",{style:{textAlign:"center",marginTop:16},children:[(0,D.jsx)(F,{type:"secondary",children:"\u6536\u6b3e\u7801\u56fe\u7247"}),(0,D.jsx)("div",{style:{width:200,height:200,border:"1px dashed #d9d9d9",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",margin:"16px auto",backgroundColor:"#fafafa"},children:(0,D.jsx)(F,{type:"secondary",children:"\u6536\u6b3e\u7801\u56fe\u7247"})})]})]})}),(0,D.jsx)(o.A.Item,{label:"\u4ed8\u6b3e\u91d1\u989d\uff08\u7f8e\u5143\uff09",required:!0,children:(0,D.jsx)(x.A,{type:"number",placeholder:"\u8bf7\u8f93\u5165\u4ed8\u6b3e\u91d1\u989d",value:de,onChange:e=>oe(e.target.value),"aria-label":"\u8bf7\u8f93\u5165\u4ed8\u6b3e\u91d1\u989d",addonAfter:"\u7f8e\u5143",size:"large"})}),(0,D.jsx)(m.A,{message:"\u8bf7\u8003\u8651\u624b\u7eed\u8d39\uff0c\u4fdd\u969c\u5230\u8d26\u91d1\u989d",type:"warning",showIcon:!0,style:{marginTop:16}})]}):null:null,"7days"!==V&&(0,D.jsx)(o.A.Item,{name:"payment_time",label:"\u4ed8\u6b3e\u65f6\u95f4",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4ed8\u6b3e\u65f6\u95f4"}],children:(0,D.jsx)(v.A,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss",placeholder:"\u8bf7\u9009\u62e9\u4ed8\u6b3e\u65f6\u95f4",size:"large",style:{width:"100%"},disabledDate:e=>e&&e>T()().endOf("day")})}),"7days"!==V&&(0,D.jsxs)(o.A.Item,{label:"\u4ed8\u6b3e\u622a\u56fe",required:!0,validateStatus:0===ee.length?"error":"success",help:0===ee.length?"\u8bf7\u4e0a\u4f20\u4ed8\u6b3e\u622a\u56fe":"",children:[(0,D.jsx)(A.A,{...ye,listType:"picture",children:(0,D.jsx)(f.Ay,{icon:(0,D.jsx)(Y.A,{}),size:"large",tabIndex:0,children:"\u4e0a\u4f20\u622a\u56fe"})}),(0,D.jsx)(F,{type:"secondary",children:"\u652f\u6301 JPG\u3001PNG\u3001GIF\u3001WebP \u683c\u5f0f\uff0c\u6700\u5927 10MB"})]}),V&&(0,D.jsxs)(h.A,{style:{backgroundColor:"#f6ffed",borderColor:"#b7eb8f",marginBottom:16},role:"region",children:[(0,D.jsxs)(g.A,{gutter:16,children:[(0,D.jsx)(j.A,{span:8,children:(0,D.jsx)(b.A,{title:"\u9009\u62e9\u65f6\u957f",value:null===(e=ce.find(e=>e.value===V))||void 0===e?void 0:e.label,prefix:(0,D.jsx)(C.A,{})})}),(0,D.jsx)(j.A,{span:8,children:(0,D.jsx)(b.A,{title:"\u5e94\u4ed8\u91d1\u989d",value:he(),prefix:(0,D.jsx)(I.A,{}),suffix:"\u7f8e\u5143"})}),(0,D.jsx)(j.A,{span:8,children:(0,D.jsx)(b.A,{title:"\u9884\u8ba1\u5230\u671f\u65f6\u95f4",value:"lifetime"===V?"\u65e0\u9650\u65f6\u957f":ue()?ue().format("YYYY-MM-DD HH:mm"):"\u8bf7\u9009\u62e9\u751f\u6548\u65f6\u95f4",prefix:(0,D.jsx)(C.A,{}),valueStyle:{fontSize:"14px",color:"lifetime"===V?"#52c41a":void 0}})})]}),"advance"===K&&!Q&&(0,D.jsx)(m.A,{message:"\u8bf7\u9009\u62e9\u751f\u6548\u65f6\u95f4\u4ee5\u67e5\u770b\u5230\u671f\u65f6\u95f4",type:"warning",showIcon:!0,style:{marginTop:16}})]}),(0,D.jsx)(o.A.Item,{children:(0,D.jsx)(f.Ay,{type:"primary",htmlType:"submit",loading:G,size:"large",block:!0,disabled:!V||"7days"!==V&&!E||"alipay"===E&&"7days"!==V&&!le||"crypto"===E&&"7days"!==V&&!de||"advance"===K&&!Q,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",height:"48px",fontSize:"16px",fontWeight:"bold"},tabIndex:0,children:"\u63d0\u4ea4\u8ba2\u5355"})})]})}),O&&(0,D.jsx)(m.A,{message:"\u4e0b\u5355\u62e5\u6324\uff0c\u8bf7\u7b49\u5f85",description:O,type:"warning",showIcon:!0,style:{marginTop:16}}),L&&(0,D.jsx)(h.A,{title:"\u8ba2\u5355\u63d0\u4ea4\u6210\u529f",style:{backgroundColor:"#f6ffed",borderColor:"#b7eb8f",marginTop:16},role:"region",children:(0,D.jsxs)(u.A,{direction:"vertical",style:{width:"100%"},children:[(0,D.jsxs)("div",{children:[(0,D.jsx)(F,{strong:!0,children:"\u8ba2\u5355\u72b6\u6001\uff1a"}),(0,D.jsx)(F,{children:"pending_review"===L.status?"\u5f85\u786e\u8ba4":L.status})]}),(0,D.jsx)(F,{type:"secondary",children:"\u8bf7\u7b49\u5f85\u7ba1\u7406\u5458\u786e\u8ba4\u60a8\u7684\u4ed8\u6b3e\uff0c\u786e\u8ba4\u540e\u5373\u53ef\u4f7f\u7528\u670d\u52a1\u3002"})]})}),(0,D.jsx)(w.A,{open:ie,footer:null,onCancel:()=>ae(!1),width:"80%",style:{top:20},children:(0,D.jsx)(y.A,{style:{width:"100%"},src:te,preview:{visible:ie,onVisibleChange:e=>ae(e)}})})]})})}}}]);
//# sourceMappingURL=563.55a8aacf.chunk.js.map